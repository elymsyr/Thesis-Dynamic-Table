if (undefined === window.Kameleoon){(function(){!function(e,t){e.kbowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.find=function(e,t){var r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,i=e,n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e}();t.default=n,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.OS_MAP=t.PLATFORMS_MAP=void 0;t.PLATFORMS_MAP={t:"tablet",m:"mobile",d:"desktop"};t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",Linux:"Linux"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){}var t,r,i;return e.parse=function(e){return new n.default(e).getResult()},t=e,i=[],(r=null)&&a(t.prototype,r),i&&a(t,i),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=o(r(92)),n=o(r(93)),s=o(r(94)),a=o(r(17));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UA parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/windows phone/i],describe:function(e){return{name:s.OS_MAP.WindowsPhone}}},{test:[/windows /i],describe:function(e){return{name:s.OS_MAP.Windows}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){return{name:s.OS_MAP.iOS}}},{test:[/macintosh/i],describe:function(e){return{name:s.OS_MAP.MacOS}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){return{name:s.OS_MAP.iOS}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){return{name:s.OS_MAP.Android}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/googlebot/i],describe:function(){return{type:"bot"}}},{test:[/huawei/i],describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"android"===e.getOSName(!0)&&Number(String(e.getOSVersion()).split(".")[0])>=3},describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}}];t.default=a,e.exports=t.default}})}));class APIConfiguration{constructor(e){this.generationTime=e.scriptProduceTime;this.goals=e.goals.map((e=>new APIGoal(e)));this.singlePageSupport=Kameleoon.Internals.runtime?Kameleoon.Internals.runtime.singlePageSupport:e.singlePageSupport;this.siteCode=e.siteCode}}class APIAction{constructor(i,t){this.dateLaunched=i.dateStatusModified;this.dateModified=i.dateModified;this.id=i.id;this.name=i.name;this.targetSegment=new APISegment(i.targetingSegment);this.active=i.targeting&&!i.disabled&&i.displayedVariation&&null!=i.displayedVariation.id;this.triggered=i.targeting||!1;this.goals=Kameleoon.Internals.configuration.goals.filter((t=>-1!=(i.goals||[]).indexOf(t.id))).map((i=>new APIGoal(i)));this.untrackedTrafficReallocationTime=i.untrackedRespoolTime||null;let e=i=>{let t=Kameleoon.Internals.runtime.variations.filter((t=>t.id==i));return t&&t[0]};const a=Kameleoon.Internals.runtime.Visitor.currentVisit;if("experiments"==t){this.mainGoal=i.kameleoonTracking&&i.kameleoonTracking.mainGoalId?new APIGoal(Kameleoon.Internals.configuration.goals.filter((t=>t.id==i.kameleoonTracking.mainGoalId))[0]):null;let t=e(i.registeredVariationId);this.associatedVariation=t?new APIVariation(t,i):null;this.trafficDeviation={};this.variations=[];this.redirectProcessed=i.redirectProcessed||!1;for(let t in i.deviation){this.trafficDeviation[t]=100*i.deviation[t];this.variations.push(new APIVariation(e(parseInt(t)),i))}let n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","experimentsTriggered",{});this.triggeredInVisit=n[this.id]?!0:!1;this.activatedInVisit=a.ExperimentActivations[this.id]?!0:!1}else{this.mainGoal=new APIGoal(Kameleoon.Internals.configuration.goals.filter((t=>t.id==i.mainGoalId))[0]);this.associatedVariation=new APIVariation(e(i.associatedVariation.id),i);let t=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","personalizationsTriggered",{});this.triggeredInVisit=t[this.id]?!0:!1;this.activatedInVisit=this.triggeredInVisit&&a.PersonalizationActivations[this.id]?!0:!1}}}class APIActionActivation{constructor(i,n,t){const a="experiment"==i;const e=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(n,a);const o=a?"ExperimentActivations":"PersonalizationActivations";const s=t[o][n].associatedVariationID;const r=Kameleoon.Internals.configuration.variations.filter((i=>i.id==s))[0];if(a){this.experimentID=n;this.experiment=e?new APIAction(e,"experiments"):null}else{this.personalizationID=n;this.personalization=e?new APIAction(e,"personalizations"):null}this.times=t[o][n].times;this.associatedVariationID=s;this.associatedVariation=r?new APIVariation(r,e):null}}class APIActions{constructor(e){const i=e;const t="experiments"==i;const n=()=>{if(Kameleoon.Internals.runtime)return Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(i);else return[]};const a=e=>new APIAction(e,i);this.getAll=()=>n().map(a);this.getActive=()=>n().filter((e=>(!0===e.targeting||e.trackingPerformed)&&1!=e.disabled&&e.displayedVariation&&null!=e.displayedVariation.id)).map(a);this.getTriggeredInVisit=()=>n().map(a).filter((e=>e.triggeredInVisit));this.getActivatedInVisit=()=>n().map(a).filter((e=>e.activatedInVisit));const s=(e,i)=>{const t=n().filter((t=>t[e]==i))[0];if(t)return a(t);return null};this.getById=e=>s("id",e);this.getByName=e=>s("name",e);if(t){this.assignVariation=(e,i,t)=>{};this.block=(e,i=!1)=>{};this.trigger=(e,i)=>{};this.triggerExperiment=(e,i)=>{}}else{this.block=(e,i=!1)=>{};this.disable=e=>{};this.trigger=(e,i)=>{}}}}class APIGoal{constructor(t){if(t){this.id=t.id;this.name=t.name;this.type=t.type}}}class APIProduct{constructor(e,a){let t=["accessories","auto","available","brand","description","fashion","gender","groupId","isChild","isFashion","isNew","leftovers","merchantID","model","name","params","rating","seasonality","sku","tags","typePrefix","url"];this.productID=e;for(let e in a)switch(e){case"imageURL":case"mainImageURL":this.imageURL=a.mainImageURL||a.imageURL;break;case"price":case"oldPrice":case"availableQuantity":case"priceMargin":this[e]=parseFloat(a[e])||null;break;case"categories":if(a.categories.length>0)this.categories=a.categories.map((e=>{if(e.parent)e.parent=e.parent.toString();e.id=e.id.toString();return e}));break;default:let s=t.filter((a=>a===e)).length>0;if(s)this[e]=a[e]}}getTrackingParameters(){let e={};e.url=encodeURIComponent(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL());for(let a in this)switch(a){case"productID":break;default:switch(typeof this[a]){case"object":e[a]=encodeURIComponent(JSON.stringify(this[a]));break;case"string":e[a]=encodeURIComponent(this[a]);break;case"number":case"boolean":case"symbol":e[a]=this[a]}}return Kameleoon.Utils.parseObjectToUrlParams(e)}}class APISegment{constructor(i){if(i){this.id=i.id;this.name=i.name}}}class APITemplate{constructor(s,t){this.name=s;this.customFields=t}}class APIVariation{constructor(e,t={}){if(e){this.id=e.id;this.name=e.name;if(t.experimentAction){var i=t.variations.filter((t=>t.id==e.id))[0];this.reallocationTime=i?i.respoolTime:null}else this.reallocationTime=null;this.instantiatedTemplate=e.widgetTemplateInputData?new APITemplate(e.widgetTemplateName,e.widgetTemplateInputData):null}}}class APIVisit{constructor(t){this.pageViews=t.obtainPageNumberViews();this.duration=t.lastActivityDate-t.startDate;this.locale=Kameleoon.Utils.getLocale();this.startDate=t.startDate;this.index=t.visitNumber;this.currentProduct=null;this.products=[];this.clicks=t.clicks||0;this.pageURLsVisited=t.pageURLsVisited;this.activatedSegments=t.activatedSegments;this.lastActivityDate=t.lastActivityDate;this.activatedExperiments=Object.keys(t.ExperimentActivations).map((e=>new APIActionActivation("experiment",parseInt(e),t)));this.activatedPersonalizations=Object.keys(t.PersonalizationActivations).map((e=>new APIActionActivation("personalization",parseInt(e),t)));if(t==Kameleoon.Internals.runtime.Visitor.currentVisit){this.device=new Device;this.geolocation=t.Geolocation;}this.conversions=Kameleoon.Utils.clone(t.conversions);this.customData={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in t.customData){const n=e[i];if(null!=n)this.customData[n.name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(i,t.customData[i])}let i="<OTHER / UNKNOWN>";let n=[];let a=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","firstReferrersIndices",[]);for(let t=0,e=a.length;t<e;t++){let e=a[t];let s;if(0==e)s="<RESTART>";else{let t=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[e-1];s=null==t?i:t.name}n.push(s)}this.acquisitionChannel=n[0];this.landingPageURL=t.landingPageURL;this.weather=new APIWeather(t)}}class APIVisitor{constructor(){this.getCustomDataVisitor=()=>{const t={};const i=Kameleoon.Internals.runtime.Visitor.customData;const s=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const e in i)if(s[e])t[s[e].name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(e,i[e]);return t};this.setVisitorCode=t=>{Kameleoon.Internals.runtime.Visitor.setVisitorCode(t)};const{Visitor:t,personalizationsActive:i,Consent:s}=Kameleoon.Internals.runtime;this.numberOfVisits=t.totalVisits;this.timeStartedEldestVisit=t.timeStartedEldestVisit;this.customData=this.getCustomDataVisitor();this.personalizationsActive=i;this.code=t.currentVisit.visitorCode;this.currentVisit=new APIVisit(t.currentVisit);this.visits=t.visits.map((t=>new APIVisit(t)));this.previousVisit=t.visits.length>1?new APIVisit(t.visits.slice(-2)[0]):null;this.experimentLegalConsent=s.AB_TESTING;this.personalizationLegalConsent=s.PERSONALIZATION;this.firstVisitStartDate=t.timeStartedEldestVisit}}class APIWeather{constructor(i){let s=i.Weather;this.temperature=s.temperature;this.humidity=s.humidity;this.pressure=s.pressure;this.windSpeed=s.windSpeed;this.cloudiness=s.cloudiness;this.sunrise=s.sunrise;this.sunset=s.sunset;this.conditionCode=s.conditionCode;this.conditionDescription=s.conditionDescription}}class Analyst{constructor(){this.initialize=e=>{this.isTimeout=!1;if(window.kameleoonDisplayPage){if(null==Kameleoon.Internals.configuration.behaviorWhenTimeout||document.getElementById("kameleoonLoadingStyleSheet"))window.clearTimeout(window.kameleoonDisplayPageTimeOut);else if(null==window.kameleoonEndLoadTime)this.isTimeout=!0;try{window.kameleoonDisplayPage(!0)}catch(e){}window.kameleoonDisplayPage=null}window.kameleoonEndLoadTime=(new Date).getTime();e()};this.load=()=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"load",time:(new Date).getTime()});Kameleoon.Utils.runProtectedFunction((function(){if(window.kameleoonQueue)window.kameleoonQueue=new CommandQueue(window.kameleoonQueue,"IMMEDIATE");if(window.kameleoonAddCustomAction){Kameleoon.Utils.runProtectedScript(window.kameleoonAddCustomAction,"kameleoonAddCustomActionScript.js");delete window.kameleoonAddCustomAction}if(window.kameleoonAddCustomGlobalScript){Kameleoon.Internals.configuration.globalScript=window.kameleoonAddCustomGlobalScript;delete window.kameleoonAddCustomGlobalScript}window.addEventListener("error",(e=>{if(e.error&&e.error.stack&&e.error.stack.match(/kameleoon/gi)){Kameleoon.Utils.Logger.send(e.error.stack,"kameleoon.js");return!1}}));Kameleoon.Analyst.initialize((()=>{const e=Kameleoon.Analyst.checkBlockingElements();const o=window.kameleoonEndLoadTime-(window.kameleoonStartLoadTime||window.kameleoonEndLoadTime)-25;Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Loaded",{timeout:"TIMEOUT"==e,loadTime:o});if(Kameleoon.Internals.runtime)Kameleoon.Internals.runtime.clear();if(0==e.length){Kameleoon.Internals.runtime=new Runtime;Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Internals.runtime.run()}))}else{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"abort",blockingReason:e});Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Aborted",{reason:e})}}))}))};this.loadKameleoonFull=(e,o)=>{if(!Kameleoon.Internals.runtime.kameleoonFull&&(this.kameleoonFullNeeded()||o)){const o="kameleoonFullApplicationCode";const n=o=>{Kameleoon.Utils.runProtectedScript(o+"\n;"+"("+e.toString()+")()","kameleoonFull.js")};const t=sessionStorage.getItem(o);if(null!=t)n(t);else{const{STATIC_HOST_NAME:e,DOMAIN:t}=Kameleoon.Internals.configuration;Kameleoon.Utils.performBeaconServerCall("https://"+e+"."+t+"/kameleoon-full.js?cache="+Kameleoon.Utils.obtainRandomString(16),(e=>{if(void 0===e.readyState||4==e.readyState&&200==e.status){sessionStorage.setItem(o,e.responseText);n(e.responseText)}}))}}else e()};this.Goals=new Goals}checkBlockingElements(){let e=!1;try{const o="kameleoonPrivateMode";if(window.localStorage||window.sessionStorage){localStorage.getItem(o);sessionStorage.getItem(o)}else e=!0}catch(o){e=!0}if(e)return"STORAGE";if(this.isTimeout){return"TIMEOUT"}document.removeEventListener("visibilitychange",Kameleoon.Analyst.load);if("prerender"==document.visibilityState){document.addEventListener("visibilitychange",Kameleoon.Analyst.load);return"PRERENDER"}if(-1!=location.href.indexOf("kameleoonDisabled"))return"PARAMETER";return""}kameleoonFullNeeded(){const{parameters:e,simulationMode:o}=Kameleoon.Internals.runtime;if(sessionStorage.getItem("kameleoonFullApplicationCode")||sessionStorage.getItem("kameleoonLightExtension")||e.kameleoon||e.kameleoonVariationId||e["kameleoon-simulation"]||e.kameleoonLightExtension||o||Kameleoon.Utils.readLocalData("kameleoonSimulationParameters","COOKIE"))return!0;return!1}loadSimulation(){if(!Kameleoon.Internals.runtime.parameters.kameleoonVariationId)Object.keys(localStorage).forEach((e=>{if(-1!==e.indexOf("kameleoonVariation-"))localStorage.removeItem(e)}))}loadVariationFromServer(e,o){}processSimulations(){}}Analyst.CODE_ALPHABET="abcdefghijklmnopqrstuvwxyz0123456789";class API{constructor(){this.Core={enableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.enable(e)},disableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.disable(e)},enableSinglePageSupport:function(){Kameleoon.Internals.runtime.enableSinglePageSupport.apply(Kameleoon.Internals.runtime,arguments)},enableDynamicRefresh:function(){Kameleoon.Internals.runtime.enableDynamicRefresh.apply(Kameleoon.Internals.runtime,arguments)},getConfiguration:()=>new APIConfiguration(Kameleoon.Internals.configuration),load:function(){Kameleoon.Analyst.load.apply(Kameleoon.Analyst,arguments)},processRedirect:function(){Kameleoon.Utils.processRedirect.apply(Kameleoon.Utils,arguments)},runWhenConditionTrue:(e,n,t=200)=>{if(e())Kameleoon.Utils.runProtectedFunction(n,!0);else{const o=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(o);this.Core.runWhenConditionTrue.apply(Kameleoon,[e,n,t])}),t,!0)}},runWhenElementPresent:(e,n,t,o)=>{const a=null==t;const r=Kameleoon.Utils.querySelectorAll(e);const i=n;if(o)n=n=>{KMutationObserver.setMutationObserverSPA();const t=`data-kameleoon-dynamic-class-${Kameleoon.Utils.obtainRandomString(4)}`;const o=e=>{e.forEach((e=>e.setAttribute(t,"true")))};o(n);i(n);Kameleoon.Internals.runtime.waitingDynamicElements.push({selector:e,attribute:t,callback:e=>{o(e);i(e)}})};if(!Kameleoon.Internals.runtime.querySelectorAllHasError)if(0<r.length)Kameleoon.Utils.runProtectedFunction((()=>{n(r)}),!0);else if(Kameleoon.Internals.runtime.cantUseMutationObserver||!a){const n=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(n);this.Core.runWhenElementPresent.apply(Kameleoon,[e,i,t||200,o])}),t||200,!0)}else Kameleoon.Internals.runtime.waitingElementPresentObjects.push({selector:e,callback:n,useAntiFlicker:a})}};this.Goals={cancelConversion:(e,n)=>{try{this.Goals.processConversions(e,n,!0)}catch(e){}},processConversion:(e,n)=>{try{this.Goals.processConversions(e,n,!1)}catch(e){}},processConversions:(e,n,t)=>{Kameleoon.Internals.runtime.goals.forEach((o=>{if(e==o.id||e==o.name)Kameleoon.Analyst.Goals.processConversions([{goal:o,revenue:n,negative:t}])}))}};this.Data={readLocalData:e=>Kameleoon.Internals.runtime.storedData.Vars[e]?Kameleoon.Internals.runtime.storedData.Vars[e].value:null,resetCustomData:e=>{this.Data.setCustomData(e,[],!0)},retrieveDataFromRemoteSource:(e,n)=>{const t={siteCode:Kameleoon.Internals.configuration.siteCode};let o="map";if(e instanceof Array){o="maps";t.keys=encodeURIComponent(JSON.stringify(e))}else t.key=encodeURIComponent(e.toString());Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(`${Kameleoon.Internals.runtime.DATA_URL}/map/${o}`,Kameleoon.Utils.parseObjectToUrlParams(t),!1),(e=>{if(4==e.readyState){let t={};if(200==e.status)t=JSON.parse(e.responseText);n&&n(t)}}),null)},setCustomData:(e,n,t=!1)=>{if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.gathererRun){let o=null;for(const n in Kameleoon.Internals.runtime.Gatherer.configuration.customData){const t=Kameleoon.Internals.runtime.Gatherer.configuration.customData[n];if(null!=t&&t.name==e){o=parseInt(n);break}}if(null!=o)Kameleoon.Gatherer.CustomData.register(o,{value:n,overwrite:t})}},writeLocalData:(e,n,t)=>{Kameleoon.Internals.runtime.storedData.Vars[e]={value:n,date:(new Date).getTime()+24*60*60*1e3*(t?30:1/24)}},performRemoteSynchronization:(e,n,t)=>{}};this.Events={triggered:[],trigger:e=>{this.Core.runWhenConditionTrue((()=>!0===Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval),(()=>{this.Events.triggered.push(e);if(Kameleoon.Analyst.Actions)Kameleoon.Analyst.Actions.processAllActions();if(Kameleoon.Targeting)Kameleoon.Targeting.processAllTargetingSegments();}),100)}};this.Tracking={processOmniture:e=>{Kameleoon.Tracking.processOmniture&&Kameleoon.Tracking.processOmniture(e)}};this.Products={obtainFullSearchProducts:(e,n,t)=>{},obtainInstantSearchProducts:(e,n,t)=>{},obtainProductInteractions:(e,n,t,o)=>{const a={};null!=t&&(a.timeBegin=t);null!=o&&(a.timeEnd=o);Kameleoon.Internals.runtime.Visitor.obtainProductData("productCounters",e,a,(e=>{for(const n in e){e[n].views=e[n].v||0;e[n].cartQuantities=e[n].atcq||0;e[n].boughtQuantities=e[n].bq||0;delete e[n].v;delete e[n].atcq;delete e[n].bq}n(e)}))},obtainProductData:(e,n,t={all:!0})=>{Kameleoon.Internals.runtime.Visitor.obtainProductData("productData",e,t,n)},obtainRecommendedProducts:(e,n,t,o)=>{},trackAddToCart:(e,n,t=1)=>{e=e.toString();if(null!=e&&e.length>0)if(t>0){Kameleoon.Internals.runtime.RequestManager.sendProduct(e,`eventType=productAddToCart&quantity=${t}`);}},trackAddToWishList:(e,n=1)=>{},trackCategoryView:e=>{},trackSearchQuery:e=>{},trackProductView:(e,n)=>{e=e.toString();if(null!=e&&e.length>0){const t=new APIProduct(e,n);Kameleoon.Internals.runtime.RequestManager.sendProduct(e,`eventType=productPage&${t.getTrackingParameters()}`);if(Kameleoon.Internals.runtime.gathererRun)Kameleoon.Gatherer.track(VisitEvent_Product,{ean:e});Kameleoon.Internals.runtime.product=t}},trackTransaction:e=>{for(let t=0;t<e.length;++t){const o=e[t];o.productID=(o.productId||o.productID).toString();if(null!=o.productID&&o.productID.length>0){o.quantity=parseInt(o.quantity)||1;if(o.quantity>0)Kameleoon.Internals.runtime.RequestManager.sendProduct(o.productID,`eventType=productBuy&quantity=${o.quantity}`)}}}};this.Experiments=new APIActions("experiments");this.Personalizations=new APIActions("personalizations");this.Segments={getAll:()=>Kameleoon.Internals.runtime.targetingSegments.map((e=>new APISegment(e))),getById:e=>{const n=Kameleoon.Internals.runtime.targetingSegments.filter((n=>n.id==e))[0];return n?new APISegment(n):null},getByName:e=>{const n=Kameleoon.Internals.runtime.targetingSegments.filter((n=>n.name==e))[0];return n?new APISegment(n):null},reevaluate:e=>{},trigger:e=>{}};this.Variations={execute:e=>{const n=e=>{const n=Kameleoon.Internals.runtime.variations.filter((n=>n.id==e));return n?n[0]:null};let t=n(e);if(t){t=new Variation(t);if(t.redirections)t.preProcessRedirect();Kameleoon.Utils.addCSSStyleSheet(t.cssCode);return t.applyJavascriptCode(!0)}return null}};this.Utils={addEventListener:function(e,n,t,o){Kameleoon.Utils.addEventListener(e,n,t,o,!0)},addUniversalClickListener:function(e,n,t){const o=Kameleoon.Internals.runtime.mouseDownEvent;this.addEventListener(e,o,(function(e){if(!Kameleoon.Internals.runtime.touchMoveEvent&&("mousedown"==o||!e.target||!e.target.closest||!e.target.closest("[disabled]")))n&&n(e)}))},clearInterval:function(){Kameleoon.Utils.clearInterval.apply(Kameleoon.Utils,arguments)},clearTimeout:function(){Kameleoon.Utils.clearTimeout.apply(Kameleoon.Utils,arguments)},createHash:function(e){return Kameleoon.Utils.computeStringHash.apply(Kameleoon.Utils,arguments)},getURLParameters:function(){return Kameleoon.Utils.parseParameters.apply(Kameleoon.Utils,arguments)},performRequest:(e,n,t,o=5e3)=>Kameleoon.Utils.performBeaconServerCall(e,n,t,o),querySelectorAll:function(e){return Kameleoon.Utils.querySelectorAll.apply(Kameleoon.Utils,arguments)},setInterval:(e,n=200)=>Kameleoon.Utils.setInterval(e,n,!1,!0),setTimeout:(e,n=200)=>Kameleoon.Utils.setTimeout(e,n,!0)};Object.defineProperty(this.Utils,"mouseDownEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.mouseDownEvent}});Object.defineProperty(this.Utils,"touchMoveEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.touchMoveEvent}});Object.defineProperty(this,"Visitor",{enumerable:!0,get:function(){try{if(!Kameleoon.Internals.runtime)return{setVisitorCode:e=>{Kameleoon.Internals.configuration.predefinedVisitorCode=e}};else return new APIVisitor}catch(e){return null}}});Object.defineProperty(this,"CurrentVisit",{enumerable:!0,get:function(){try{return new APIVisit(Kameleoon.Internals.runtime.Visitor.currentVisit)}catch(e){return null}}});Object.defineProperty(this,"React",{enumerable:!1,get:function(){return window.KameleoonAPIReact||null}})}}class Gatherer{constructor(){this.MAX_HREF_LENGTH_IN_A_REQUEST=200;this.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST=200}run(e){let t=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.Gatherer);if("string"==typeof t)t=JSON.parse(Kameleoon.Utils.decodeString(t));Kameleoon.Internals.runtime.Gatherer={configuration:t,active:!0,clicks:0};this.Browser=new Browser(t.browsers);this.CustomData=new CustomData(t.customData);this.KeyPage=new KeyPage(t.keyPages);this.Language=new Language;this.OperatingSystem=new OperatingSystem(t.oss);this.Referrer=new Referrer(t.referrers);this.TimeZone=new TimeZone;Kameleoon.Internals.runtime.storedData.saveField("Gatherer","startsOfVisitForCurrentPage",0);Kameleoon.Internals.runtime.Visitor=new Visitor;e();Kameleoon.Internals.runtime.Visitor.performRemoteVisitorSynchronization();this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);VisitEvent_Activity.initialize();this.CustomData.run();Kameleoon.Internals.runtime.gathererRun=!0}startNewVisit(e,t){Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!0,!0,t);this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);this.CustomData.run();}track(e,t){new VisitEvent(e).track(t)}}class KameleoonEngine{constructor(){this.Analyst=new Analyst;this.API=new API;this.Gatherer=new Gatherer;this.Loader=new Loader;this.Tracking=new Tracking;this.Utils=new Utils}}class Loader{constructor(){this.enableKameleoonEditorListener=()=>{if(!Kameleoon.Internals.runtime.editorListenerEnabled){Kameleoon.Internals.runtime.editorListenerEnabled=!0;const t=t=>{if(!t)t=window.event;Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,t)};Kameleoon.Utils.addEventListener(document,"keyup",t,!1)}};this.listenKeys=t=>{if(t.shiftKey){if(113==t.keyCode&&Kameleoon.Internals.configuration.webExperimentationSetup){Kameleoon.Internals.runtime.editorMode=!0;Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)}),!0)}if(115==t.keyCode&&(Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.parameters.kameleoonVariationSelection))Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableSimulationPanel()}),!0)}};}}class Runtime{constructor(){this.DATA_URL=Kameleoon.Internals.configuration.DATA_URL;this.PAGE_LOADED_POLL_DELAY=250;this.PAGE_LOADING_POLL_DELAY=75;this.IDLE_DURATION=1e4;this.enableSinglePageSupport=()=>{this.singlePageSupport=!0;this.href=window.location.href;KMutationObserver.setMutationObserverSPA();Kameleoon.Utils.setInterval((()=>{const e=this.href;this.href=window.location.href;if(e!=this.href)Kameleoon.Analyst.load.apply(this,[])}),100)};this.enableDynamicRefresh=()=>{this.dynamicRefresh=!0;KMutationObserver.setMutationObserverSPA()};this.executeGlobalScript=()=>{if(Kameleoon.Internals.configuration.globalScript&&!this.globalScriptProcessed&&!this.editorMode&&!this.kameleoonSelectionIframeMode){Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"globalScript"});this.globalScriptProcessed=!0;Kameleoon.Utils.runProtectedScript(Kameleoon.Internals.configuration.globalScript,"kameleoonGlobalScript.js")}};this.initializePredefinedVisitorCode=()=>{const{predefinedVisitorCode:e,experiments:t,personalizations:i}=Kameleoon.Internals.configuration;if(e){const o=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE")||Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(o==e)return;const n=this.storedData.Visitor.visits;if(n)n.slice(-1)[0].visitorCode=e;Kameleoon.Utils.saveVisitorCode(e);t.forEach((e=>{Kameleoon.Utils.eraseLocalData("kameleoonExperiment-"+e.id,null,"LS")}));i.forEach((e=>{Kameleoon.Utils.eraseLocalData("kameleoonPersonalization-"+e.id,null,"LS")}))}};this.initializeActions=()=>{if(Kameleoon.Internals.configuration.webExperimentationSetup){this.targetingSegments=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.targetingSegments);this.variations=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.variations);}};this.initializeActionsAfterGatherer=()=>{};this.initializeIdleTimeListener=()=>{};this.initializeListeners=()=>{Kameleoon.Utils.domReady((()=>{this.domReady=!0;if(!0!==Kameleoon.Internals.configuration.disableEditorLaunchViaKeys)Kameleoon.Loader.enableKameleoonEditorListener();if(this.kameleoonSelectionIframeMode){const e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src","https://back-office-redesign."+Kameleoon.Internals.configuration.DOMAIN+"/get-script?type=selection");this.headNode.appendChild(e)}if(0==window.kameleoonLightIframe&&window.kameleoonIframeURL)if(this.Gatherer.startOfVisit)Kameleoon.Utils.setTimeout((()=>{const e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style.cssFloat="left !important";e.style.opacity="0.0 !important";e.width="0px";e.height="0px";e.onload=()=>{e.parentNode.removeChild(e)};document.head.appendChild(e)}),5e3)}));if("touchend"==this.mouseDownEvent){Kameleoon.Utils.addEventListener(document,"touchmove",(e=>{this.touchMoveEvent=!0}));Kameleoon.Utils.addEventListener(document,"touchstart",(e=>{this.touchMoveEvent=!1}))}if(!this.iframeLocalStorage)window.addEventListener("storage",(e=>{const t=null==e.key?[""]:e.key.split("-");let i=t[0];if(-1!=i.indexOf("kameleoon")){if(window.document.hasFocus())return;let o;try{o=null==e.newValue?null:JSON.parse(e.newValue).value}catch(e){return}const n={};switch(i){case"kameleoonExperiment":n.type=i;const e=t[1];n.experimentId=parseInt(e);let a;if(null==o)a=null;else{const e=o.split("/")[0];a=isNaN(e)?e:parseInt(e)}n.registeredVariationId=a;break;case"kameleoonGlobalPersonalizationExposition":n.type=i;n.active=null==o?null:"true"==o.split("/")[0];break;case this.dataKeyName:case"kameleoonSimulationVisitorData":n.type=i;n.value=null==o?null:o;break;case"kameleoonLegalConsent":n.type=i;n.saveLegalConsent=null==o?null:o;break}if(null!=n.type)Kameleoon.Utils.processStorageData(n)}}),!1);this.initializeIdleTimeListener();};this.loadExternalRequests=()=>{this.Geolocation="undefined"!=typeof KGeolocation?new KGeolocation:null;this.IP="undefined"!=typeof IP?new IP:null;};this.loadAudienceSegments=()=>{};this.processPageLoaded=()=>{Kameleoon.Utils.removeBlockingStyleSheet();for(let e=0,t=this.variations.length;e<t;++e){const t="enginePollerForVariation"+this.variations[e].id;if(this[t]){if(this.cantUseMutationObserver)window.clearInterval(this[t]);this[t]=null}}};this.readFromStorageOrExternal=(e,t)=>{if(this.incomingStoredData)return this.incomingStoredData[e];else return Kameleoon.Utils.readLocalData(e,t,!0)};this.setup=()=>{if(this.parameters.kameleoon)Kameleoon.Utils.domReady((()=>{Kameleoon.Loader.enableKameleoonEditor()}));const e="adBlockerCheck";const t=Kameleoon.Utils.setInterval((()=>{let i=document.getElementById(e);if(null==i&&null!=document.body){i=document.createElement("div");i.id=e;i.className="ad-placement";document.body.appendChild(i)}if(null!=i&&0==i.clientWidth){this.adBlocker=!0;Kameleoon.Utils.clearInterval(t)}}),250);const i=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(i);const o=document.getElementById(e);if(null!=o)o.parentNode.removeChild(o);if(null==this.adBlocker){Kameleoon.Utils.clearInterval(t);this.adBlocker=!1}else Kameleoon.Gatherer.track(VisitEvent_AdBlocker)}),2e3);Kameleoon.Utils.addEventListener(window,"pageshow",(e=>{if(e.persisted)this.updateAfterPageCached()}));this.Visitor.updateFromStoredData(!1,!1,!1);if(!Kameleoon.Internals.configuration.requestsAfterConsent)this.loadExternalRequests();KMutationObserver.setMutationObserver();Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Analyst.loadSimulation()}));Kameleoon.Analyst.Goals.checkKameleoonGoals();};this.setupLocalData=e=>{Kameleoon.Utils.addEventListener(window,"message",Kameleoon.Utils.processMessageEvent,!1);if(this.iframeLocalStorage){this.externalIframe=document.getElementById("kameleoonExternalIframe")||window.kameleoonExternalIframe;this.postMessageOrigin=window.kameleoonIframeOrigin||"";this.postMessageCallbacks={};if(null==Kameleoon.Internals.configuration.externalIframeData)Kameleoon.Utils.postMessageToExternalIframe(JSON.stringify({type:"retrieve",callbackId:Kameleoon.Utils.addPostMessageCallback((t=>{this.incomingStoredData=t;e()}))}));else{this.incomingStoredData=Kameleoon.Internals.configuration.externalIframeData;e();delete Kameleoon.Internals.configuration.externalIframeData}}else{this.incomingStoredData=null;e()}};this.updateAfterPageCached=()=>{this.pageCached=!0;if(this.iframeLocalStorage)Kameleoon.Utils.postMessageToExternalIframe(JSON.stringify({type:"retrieve",callbackId:Kameleoon.Utils.addPostMessageCallback((()=>{}))}));else{const e=Kameleoon.Utils.readLocalData(this.simulationMode?"kameleoonSimulationVisitorData":this.dataKeyName,"LS",!0);this.storedData.update(e);this.Visitor.updateFromStoredData(!1,!1,!1);Kameleoon.Gatherer.track(VisitEvent_Page)}};this.getSimulationMode=()=>{const e=this.readFromStorageOrExternal("kameleoonSimulation","LS");return e?!0:!1};this.pageStartTime=(new Date).getTime();this.dataKeyName="kameleoonData";this.Device=new Device;this.deviceType=this.Device.type;this.parameters=Kameleoon.Utils.parseParameters();this.beforeUnloadEvent="Phone"==this.deviceType&&"Safari"==this.Device.browser?"pagehide":"beforeunload";this.headNode=document.getElementsByTagName("head")[0];this.editorMode="true"==this.parameters.kameleoon;this.proxyMode="proxy."+Kameleoon.Internals.configuration.DOMAIN===window.location.hostname;this.disableCache="true"==this.parameters.kameleoonDisableCache||this.parameters.kameleoonVariationId;this.kameleoonSelectionIframeMode="true"==this.parameters.kameleoonSelectionIframeMode;this.iframeLocalStorage=Kameleoon.Internals.configuration.useWideDomainSupport;this.useWideDomainSupport=Kameleoon.Internals.configuration.useWideDomainSupport||null!=window.kameleoonLightIframe;if(0==window.kameleoonLightIframe||null==window.kameleoonLightIframe)this.iframeLocalStorage=!1;this.mouseDownEvent="ontouchend"in document.documentElement?"touchend":"mousedown";this.addedClasses={};this.addedIDs={};this.eventListeners=[];this.listenVariations=[];this.waitingElementPresentObjects=[];this.waitingDynamicElements=[];this.variations=[];this.intervalIds={};this.targetingSegments=[];this.timeoutIds={};this.goals=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.goals);this.cantUseMutationObserver="undefined"==typeof MutationObserver&&!Kameleoon.Internals.configuration.disableDomMutationObserver;this.Campaigns=new Campaigns;this.Consent=new Consent;this.enableRemoteVisitorSynchronization=Kameleoon.Internals.configuration.enableRemoteVisitorSynchronization&&(!Kameleoon.Internals.configuration.enableRemoteVisitorSynchronizationItpOnly||"Safari"==this.Device.browser);Object.defineProperty(this,"experiments",{get(){return this.Campaigns.obtainCampaignsList("experiments")}});Object.defineProperty(this,"personalizations",{get(){return this.Campaigns.obtainCampaignsList("personalizations")}})}clear(){this.eventListeners.forEach((e=>{let t;if("window"==e.elementKey||"document"==e.elementKey)t="window"==e.elementKey?window:document;else{t=document.querySelector(`[kameleoonListener-${e.elementKey}=true]`);if(t)t.removeAttribute(`kameleoonListener-${e.elementKey}`)}if(t)t.removeEventListener(e.eventType,e.actionFunction,e.useCapture)}));this.waitingDynamicElements.forEach((e=>{Kameleoon.Utils.querySelectorAll(`[${e.attribute}=true]`).forEach((t=>{t.removeAttribute(e.attribute)}))}));for(const e in this.timeoutIds)Kameleoon.Utils.clearTimeout(parseInt(e));for(const e in this.intervalIds)Kameleoon.Utils.clearInterval(parseInt(e));if(this.RequestManager)this.RequestManager.processRequests();if(this.storedData)this.storedData.save(!0);if(null!=this.mutationObserver)this.mutationObserver.disconnect();if(null!=this.mutationObserverSpa)this.mutationObserverSpa.disconnect();let e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonElement'], [id*='kameleoonScenarioLayerBase'], [id^='kameleoonStyleSheet'], [class*='kameleoonWidget']");for(let t=0;t<e.length;++t)e[t].parentNode.removeChild(e[t]);e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonId'], .kameleoonOverlay");for(let t=0;t<e.length;++t)e[t].removeAttribute("id");e=Kameleoon.Utils.querySelectorAll("[class^='kameleoonClass']");for(let t=0;t<e.length;++t)e[t].removeAttribute("class");if(this.storedData)this.storedData.save(!0);Kameleoon.API.Events.triggered=[]}run(){this.running=!0;Kameleoon.Utils.removeBlockingStyleSheet();this.setupLocalData((()=>{this.simulationMode=this.getSimulationMode();this.storedData=new StoredData(this.incomingStoredData);this.Consent.setup();this.initializePredefinedVisitorCode();this.initializeActions();Kameleoon.Gatherer.run((()=>{this.RequestManager=new RequestManager}));this.initializeActionsAfterGatherer();this.executeGlobalScript();window.kameleoonQueue=new CommandQueue(window.kameleoonQueue);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Started",{newVisitorCode:1==this.Visitor.visits.length});this.initializeListeners();this.setup();this.setupAfterLocalDataRetrieval=!0}))}}class Utils{constructor(){this.events=[];this.addParameterToURL=(e,t,n)=>{if(n)return e+(-1==e.indexOf("#")?"#":"&")+t;let a="";if(-1!=e.indexOf("#")){a=e.substr(e.indexOf("#"));e=e.substr(0,e.indexOf("#"))}e+=(-1==e.indexOf("?")?"?":"&")+t+a;return e};this.computeCurrentPageAbsoluteURLNoProxyMode=function(){let e=Kameleoon.Internals.runtime;if(null==e.currentPageAbsoluteURLNoProxyMode){if(e.proxyMode){let t=e.parameters.kameleoonExperimentId||e.parameters["kameleoon-experiment-id"];if(null!=t){let n=e.Campaigns.obtainCampaign(t,!0);if(n)e.currentPageAbsoluteURLNoProxyMode=n.baseURL}}if(null==e.currentPageAbsoluteURLNoProxyMode)e.currentPageAbsoluteURLNoProxyMode=window.location.href}return e.currentPageAbsoluteURLNoProxyMode};this.computeCurrentPageCanonicalURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCanonicalURL){let e=this.querySelectorAll('link[rel="canonical"]');if(e.length>0)Kameleoon.Internals.runtime.currentPageCanonicalURL=e[0].href}return Kameleoon.Internals.runtime.currentPageCanonicalURL};this.computeCurrentPageCleanRelativeURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCleanRelativeURL)Kameleoon.Internals.runtime.currentPageCleanRelativeURL=this.computeRelativeURL(this.computeCurrentPageCleanAbsoluteURL());return Kameleoon.Internals.runtime.currentPageCleanRelativeURL};this.computeIfSuffix=(e,t)=>{let n=e.length-t.length;let a=e.lastIndexOf(t,n);return a>=0&&a==n};this.computeRelativeURL=e=>{let t=document.createElement("a");t.href=e;return t.pathname+t.search+t.hash};this.computeStringSha256=e=>{let t=1,n,a=[],o=[];while(++t<18)for(n=t*t;n<312;n+=t)a[n]=1;function r(e,t){return Math.pow(e,1/t)%1*4294967296|0}for(t=1,n=0;t<313;)if(!a[++t]){o[n]=r(t,2);a[n++]=r(t,3)}function l(e,t){return e>>>t|e<<32-t}let i=o.slice(t=0),s=this.encodeUTF8(e),m=[],u=s.length,c=[],d,f,h;for(;t<u;)c[t>>2]|=(255&s.charCodeAt(t))<<8*(3-t++%4);u*=8;c[u>>5]|=128<<24-u%32;c[h=u+64>>5|15]=u;for(t=0;t<h;t+=16){d=i.slice(n=0,8);for(;n<64;d[4]+=f){if(n<16)m[n]=c[n+t];else m[n]=(l(f=m[n-2],17)^l(f,19)^f>>>10)+(0|m[n-7])+(l(f=m[n-15],7)^l(f,18)^f>>>3)+(0|m[n-16]);let e;d.unshift((f=(d.pop()+(l(e=d[4],6)^l(e,11)^l(e,25))+((e&d[5]^~e&d[6])+a[n])|0)+(0|m[n++]))+(l(u=d[0],2)^l(u,13)^l(u,22))+(u&d[1]^d[1]&d[2]^d[2]&u))}for(n=8;n--;)i[n]=d[n]+i[n]}for(s="";n<63;)s+=(i[++n>>3]>>4*(7-n%8)&15).toString(16);return s};this.computeURLNoKameleoonParameters=e=>{let t=!1;for(let n in Kameleoon.Internals.runtime.parameters)if(-1!=n.indexOf("kameleoon")){t=!0;e=e.replace(new RegExp(n+"="+Kameleoon.Internals.runtime.parameters[n]+"&?"),"")}return t?e.replace(/\?$/,""):e};this.computeURLRegExpNoKameleoonParameters=e=>e?e.replace(/(\\\?|&|#)kameleoon[^&#()]*/g,""):null;this.createLocalData=(e,t,n,a,o,r,l,i)=>{let s="COOKIE"!=o;let m=(new Date).getTime();if(!i&&!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let i=s?"LS":"COOKIE";if(null==Kameleoon.Internals.runtime.localDataMap)Kameleoon.Internals.runtime.localDataMap={};if(null==Kameleoon.Internals.runtime.localDataMap[i])Kameleoon.Internals.runtime.localDataMap[i]={};Kameleoon.Internals.runtime.localDataMap[i][e]={name:e,value:t,days:n,domain:a,forceLocalAccess:o,jsonFormat:r,creationTime:m};if(s)l&&l();return}if(s){let a=m+24*n*60*60*1e3;if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe(JSON.stringify({type:"set",key:e,data:{value:Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(JSON.stringify(t))||t,expirationDate:a},callbackId:this.addPostMessageCallback(l)}));else{try{localStorage.setItem(e,JSON.stringify({value:Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(JSON.stringify(t))||t,expirationDate:a}))}catch(e){}l&&l()}}else{let o="";let l=r?JSON.stringify(t):t;if(n){let e=new Date(m+24*n*60*60*1e3);o="; expires="+e.toUTCString()}if("CURRENT_HOST"!=a){a=a||Kameleoon.Internals.configuration.customCookieDomainName||this.obtainCurrentRootDomain();o+="; domain="+a}const i=Kameleoon.Internals.configuration.useSecureCookie?"; Secure":"";document.cookie=e+"="+l+o+"; path=/; SameSite=Lax"+i}};this.decodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r;let l,i,s,m;let u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(u<e.length){l=t.indexOf(e.charAt(u++));i=t.indexOf(e.charAt(u++));s=t.indexOf(e.charAt(u++));m=t.indexOf(e.charAt(u++));a=l<<2|i>>4;o=(15&i)<<4|s>>2;r=(3&s)<<6|m;n+=String.fromCharCode(a);if(64!=s)n+=String.fromCharCode(o);if(64!=m)n+=String.fromCharCode(r)}n=this.decodeUTF8(n);return n};this.decodeUTF8=e=>{let t="";let n=0;let a=0,o=0,r;while(n<e.length){a=e.charCodeAt(n);if(a<128){t+=String.fromCharCode(a);n++}else if(a>191&&a<224){o=e.charCodeAt(n+1);t+=String.fromCharCode((31&a)<<6|63&o);n+=2}else{o=e.charCodeAt(n+1);r=e.charCodeAt(n+2);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&r);n+=3}}return t};this.domReady=e=>{if("complete"==document.readyState||"interactive"==document.readyState)return e();else{let t=!1;this.addEventListener(document,"DOMContentLoaded",(()=>{if(t)return;t=!0;e()}),!1);this.addEventListener(window,"load",(()=>{if(t)return;t=!0;e()}),!1)}};this.encodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r,l,i,s,m;let u=0;e=this.encodeUTF8(e);while(u<e.length){a=e.charCodeAt(u++);o=e.charCodeAt(u++);r=e.charCodeAt(u++);l=a>>2;i=(3&a)<<4|o>>4;s=(15&o)<<2|r>>6;m=63&r;if(isNaN(o))s=m=64;else if(isNaN(r))m=64;n=n+t.charAt(l)+t.charAt(i)+t.charAt(s)+t.charAt(m)}return n};this.encodeUTF8=e=>{e=e.replace(/\r\n/g,"\n");let t="";for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);if(a<128)t+=String.fromCharCode(a);else if(a>127&&a<2048){t+=String.fromCharCode(a>>6|192);t+=String.fromCharCode(63&a|128)}else{t+=String.fromCharCode(a>>12|224);t+=String.fromCharCode(a>>6&63|128);t+=String.fromCharCode(63&a|128)}}return t};this.eraseLocalData=(e,t,n)=>{let a="COOKIE"!=n;let o=Kameleoon.Internals.runtime.localDataMap;let r=a?"LS":"COOKIE";if(null!=o&&null!=o[r]&&null!=o[r][e])delete o[r][e];if(a)if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe(JSON.stringify({type:"remove",key:e,callbackId:this.addPostMessageCallback(null)}));else localStorage.removeItem(e);else this.createLocalData(e,"",-1,t,"COOKIE",!1,null,!0)};this.forceNoFlicker=e=>{let t=document.createElement("style");t.setAttribute("id","kameleoonPageLoading");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("media","screen");let n=e+" { visibility: hidden !important; background-image: none !important; }";t.appendChild(document.createTextNode(n));Kameleoon.Internals.runtime.headNode.appendChild(t)};this.getLocale=e=>{let t=Kameleoon.Gatherer.Language.obtainLocaleTag();if("fr-FR"==t)t="fr";if("en-US"==t)t="en";if(e&&(!t||"fr"!=t))t="en";return t.substring(0,2)};this.obtainComputedStyle=e=>{if(window.getComputedStyle)return getComputedStyle(e,"");return null};this.obtainCurrentRootDomain=()=>{if(null==Kameleoon.Internals.runtime.currentRootDomain){let e=window.location.hostname.split(".");let t="";const n="testRootDomain";const a="_detectRootDomain";for(let o=0,r=e.length;o<r;o++){if(o>0)t="."+t;t=e[r-o-1]+t;if(0==t.length)continue;this.createLocalData(a,n,1,t,"COOKIE",!1,void 0,!0);const l=this.readLocalData(a,"COOKIE",!1);if(l){this.eraseLocalData(a,t,"COOKIE");Kameleoon.Internals.runtime.currentRootDomain=t;break}}}return Kameleoon.Internals.runtime.currentRootDomain};this.obtainRandomString=(e,t=Analyst.CODE_ALPHABET)=>{let n=t.length;let a="";for(let o=0;o<e;++o){let e=Math.floor(Math.random()*n);a+=t.substring(e,e+1)}return a};this.parseHostName=e=>{let t=document.createElement("a");t.href=e;return t.hostname};this.processRedirect=(e,t)=>{if(window.location.href!=e){t=t||Kameleoon.Analyst.Actions.currentAction;if(Kameleoon.Internals.runtime.gathererRun&&1==Kameleoon.Internals.runtime.Visitor.currentVisit.obtainPageNumberViews()){}let a=document.createElement("a");a.href=e;if(!Kameleoon.Internals.runtime.useWideDomainSupport&&-1==window.location.href.indexOf(a.protocol+"//"+a.hostname)){if(t)e=Kameleoon.Utils.addParameterToURL(e,"kameleoonRedirect-"+t.id+"="+t.associatedVariation.id,!0)}else if(t)Kameleoon.Utils.createLocalData("kameleoonRedirect-"+t.id,t.associatedVariation.id,1,null,null,!1,null,!0);if(window.location.href!=e){Kameleoon.Utils.forceNoFlicker("*");Kameleoon.Utils.createLocalData("kameleoonReferrer",Kameleoon.Gatherer.Referrer.obtain(),1/24,null,"COOKIE",!1);window.location.replace(e)}}};this.processStorageData=e=>{if(Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval)switch(e.type){case"kameleoonExperiment":for(let t in Kameleoon.Internals.runtime.Campaigns.experiments){let n=Kameleoon.Internals.runtime.Campaigns.experiments[t];if(e.experimentId==n.id){n.registeredVariationId=e.registeredVariationId;break}}break;case"kameleoonGlobalPersonalizationExposition":Kameleoon.Internals.runtime.personalizationsActive=e.active;break;case Kameleoon.Internals.runtime.dataKeyName:case"kameleoonSimulationVisitorData":if(e.type==Kameleoon.Internals.runtime.dataKeyName&&!Kameleoon.Internals.runtime.simulationMode||"kameleoonSimulationVisitorData"==e.type&&Kameleoon.Internals.runtime.simulationMode){if(Kameleoon.Internals.runtime.pageCached)Kameleoon.Internals.runtime.storedData.update(Kameleoon.Utils.readLocalData(e.type,"LS",!0));else Kameleoon.Internals.runtime.storedData.update(JSON.parse(Kameleoon.Utils.unobfuscateString(e.value)));Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!1,!1,!1)}break;case"kameleoonLegalConsent":if(e.saveLegalConsent){let t=e=>e?"enable":"disable";if(null!=e.saveLegalConsent.AB_TESTING){let n=t(e.saveLegalConsent.AB_TESTING);Kameleoon.Internals.runtime.Consent[n]("AB_TESTING",!0)}if(null!=e.saveLegalConsent.PERSONALIZATION){let n=t(e.saveLegalConsent.PERSONALIZATION);Kameleoon.Internals.runtime.Consent[n]("PERSONALIZATION",!0)}}break}};this.querySelectorAll=(e,t)=>{Kameleoon.Internals.runtime.querySelectorAllHasError=!1;let n=!1,a,o=[],r=[];if(null==t)t=document;let l=e.match(/#([0-9]+.*)(?: |$)/);if(l){let t=e.charAt(1);e=e.replace("#"+t,"#\\3"+t+" ")}if(""!==e){if(-1!==e.indexOf("[")&&-1===e.indexOf("']")&&-1===e.indexOf('"]')){let t=e.split(/(?=\.)|(?=#)|(?=\[)/),n,a,o;t.forEach((function(t){if("["===t[0]&&-1===t.indexOf("']")&&-1===e.indexOf('"]')&&-1!==e.indexOf("=")){n=t.split(/=(.+)?/);a=n[1];a=a.substring(0,a.length-1);o=n[0]+"='"+a+"']";e=e.replace(t,o)}}))}if(-1!==e.indexOf(":contains")){n=!0;a=this.treatContainsSelector(e);e=a.newSelector}if(t&&t.querySelectorAll)if(-1!==e.indexOf(":eq"))o=this.treatEqSelector(e,t);else try{o=t.querySelectorAll(e)}catch(e){Kameleoon.Internals.runtime.querySelectorAllHasError=!0;o=[]}for(let e=0,t=o.length;e<t;++e)if(n){if(a.check(a.containText,o[e]))r.push(o[e])}else r.push(o[e])}return r};this.readLocalData=(e,t,n)=>{let a="COOKIE"!=t;let o=(new Date).getTime();try{if(!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let t=Kameleoon.Internals.runtime.localDataMap;let n=a?"LS":"COOKIE";if(null!=t&&null!=t[n]&&null!=t[n][e]){let a=t[n][e];if(o-24*a.days*60*60*1e3>=a.creationTime)delete t[n][e];else return a.value}}if(a){let t;t=localStorage&&localStorage.getItem(e);if(!t)return null;t=JSON.parse(t);if(Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e])t.value=JSON.parse(this.unobfuscateString(t.value));if(o>(t.date||t.expirationDate)){localStorage.removeItem(e);return null}return t.value}else{let t=null;let a=document.cookie.split(";");for(let o=0,r=a.length;o<r;++o){let r=a[o];let l=r.indexOf("=");if(r.substring(0,l).trim()==e){let e=r.substring(l+1);t=n&&JSON.parse(e)||e;break}}return t}}catch(e){}return null};this.runProtectedFunction=(e,t)=>{try{e()}catch(e){if(t)console.log(e);else Kameleoon.Utils.Logger.send(e,"kameleoon.js");if(Kameleoon.Internals.runtime&&t)Kameleoon.Internals.runtime.processPageLoaded()}};this.runProtectedScript=(e,t,n)=>{if(n)return n();if(e){let n=null;try{let a=t?"//# sourceURL="+t:"";n=eval.call(window,"(function () {\n"+e+"\n})();"+a)}catch(e){n=null;console.log(e)}return n}return null};this.saveVisitorCode=(e,t=!0)=>{if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage)Kameleoon.Utils.createLocalData("kameleoonVisitorCode",e,Utils.MAX_STORAGE_DAYS,null,"LS");if(t)Kameleoon.Utils.createLocalData("kameleoonVisitorCode",e,Utils.MAX_STORAGE_DAYS,null,"COOKIE")};this.seededRandom=(e,t)=>{let n;if(t){n=Kameleoon.Utils.computeStringSha256(e);return parseInt(n,16)/Math.pow(2,256)}n=this.computeStringHash(e);n=(9301*Math.abs(n)+49297)%233280;return n/233280};this.treatEqSelector=(e,t)=>{if(void 0===e)return null;let n=e.split(/\:eq\([0-9]+\)/g);let a=e.match(/(?!\:eq\()[0-9]+/g)||[];let o=null==t?document:t;for(let t=0;t<n.length;++t){n[t]=n[t].trim();if(">"===n[t].charAt(0))n[t]=n[t].substring(1,e.length).trim();if(null==o||""==n[t].trim())break;if(t>a.length-1)o=o.querySelectorAll(n[t]);else o=o.querySelectorAll(n[t])[a[t]]}if(null==o)return[];if(void 0==o.length)o=[o];let r=Kameleoon.Utils.querySelectorAll(e.replace(/\:eq\([0-9]+\)/g,""));let l=[];for(let e=0;e<r.length;++e)for(let t=0;t<o.length;++t)if(r[e]===o[t]){l.push(o[t]);break}return l};this.Logger=new Logger;this.bowser=window.kbowser||window.bowser}addEventListener(e,t,n,a,o){let r;if(e==window)r="window";else if(e==document)r="document";else{r=Kameleoon.Utils.obtainRandomString(4);e.setAttribute(`kameleoonListener-${r}`,!0)}let l=n;if(o)e.addEventListener(t,l,a);else{l=function(e){Kameleoon.Utils.runProtectedFunction((function(){n(e)}))};e.addEventListener(t,l,a)}Kameleoon.Internals.runtime.eventListeners.push({elementKey:r,eventType:t,actionFunction:l,useCapture:a})}addPostMessageCallback(e){let t=Math.random().toString();Kameleoon.Internals.runtime.postMessageCallbacks[t]=e;return t}addCSSStyleSheet(e,t,n){if(!e)return;let a=n?n:document;let o="kameleoonStyleSheet"+(t?"-"+t.id:"");let r=n?n.getElementById(o):null;let l="";if(r){l=r.textContent;r.parentNode.removeChild(r)}let i=a.createElement("style");i.className="KameleoonStyleSheet";i.setAttribute("id",o);i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("media","screen");let s=l+e;if(i.styleSheet)i.styleSheet.cssText=s;else i.appendChild(document.createTextNode(s));if(n)a.getElementsByTagName("head")[0].appendChild(i,a.getElementsByTagName("head")[0].firstChild);else Kameleoon.Internals.runtime.headNode.appendChild(i);if(t)t.loadedCSSStyleSheet=i}applyVariation(e){new Variation(e).process()}clearInterval(e){delete Kameleoon.Internals.runtime.intervalIds[e];window.clearInterval(e)}clearTimeout(e){delete Kameleoon.Internals.runtime.timeoutIds[e];window.clearTimeout(e)}clone(e){return JSON.parse(JSON.stringify(e))}computeCurrentPageCleanAbsoluteURL(){if(null==Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL){Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=this.computeURLNoKameleoonParameters(this.computeCurrentPageAbsoluteURLNoProxyMode());try{Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=decodeURIComponent(Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL)}catch(e){}}return Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL}computeStringHash(e,t){e=t?this.computeStringSha256(e):e;let n=0;for(let t=0;t<e.length;++t){n=(n<<5)-n+e.charCodeAt(t);n&=n}return n}secureSessionStorage(e,t,n){try{return window.sessionStorage[e](t,n)}catch(e){return null}}flatten(...e){let t=[];for(let e=0;e<arguments.length;e++)if(arguments[e]instanceof Array)t.push.apply(t,Kameleoon.Utils.flatten.apply(this,arguments[e]));else t.push(arguments[e]);return t}obfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1){let a=e[n];if("’"==a)a="'";t+=String.fromCharCode(a.charCodeAt(0)+16)}return t}parseParameters(){let e={};let t=window.location.hash.substring(1).replace(/\?/g,"&");let n=window.location.search.substring(1);if(n||t){let a=(n?n.split("&"):[]).concat(t?t.split("&"):[]);a.forEach((t=>{let n=t.split("=");try{e[decodeURIComponent(n[0])]=n[1]?decodeURIComponent(n[1]):null}catch(t){e[unescape(n[0])]=n[1]?unescape(n[1]):null}}))}return e}performBeaconServerCall(e,t,n,a){let o=new XMLHttpRequest;o.open("GET",e,!0);if(t)o.onreadystatechange=function(e){t.bind(o)(e.target)};if(n){o.onerror=function(e){n.bind(o)(e.target)};o.ontimeout=function(e){n.bind(o)(e.target)}}o.timeout=a||15*60*1e3;o.send()}postMessageToExternalIframe(e){if(!Kameleoon.Internals.runtime.externalIframe||!Kameleoon.Internals.runtime.externalIframe.contentWindow){if(window.kameleoonIframeURL){let t=document.createElement("iframe");t.src=window.kameleoonIframeURL;t.id="kameleoonExternalIframe";t.style.cssFloat="left !important";t.style.height="0px !important";t.style.opacity="0.0 !important";t.style.width="0px !important";t.onload=()=>{Kameleoon.Internals.runtime.externalIframe=t;Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+e,"*")};document.head.appendChild(t)}}else Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+e,"*")}processMessageEvent(e){if("string"!==typeof e.data)return;if("obtainTagCommanderVariableNames"==e.data){let t=[];if(window.tc_vars)for(let e in window.tc_vars)t.push(e);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage("tagCommanderVariableNames"+JSON.stringify(t),e.origin);return}if(0==e.data.indexOf("checkKameleoonScriptPresent")){if("https://back-office."+Kameleoon.Internals.configuration.DOMAIN==e.origin){let t="";let n=e.data.replace("checkKameleoonScriptPresent","");Kameleoon.Utils.runProtectedScript(n);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage(t,e.origin)}return}if(Kameleoon.Internals.runtime.iframeLocalStorage&&Kameleoon.Internals.runtime.postMessageOrigin==e.origin)try{let t=JSON.parse(e.data);if(t.kameleoonMessage){if(t.callbackId){let e=Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];delete Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];e&&e(t.data)}if(null!=t.type)Kameleoon.Utils.processStorageData(t)}}catch(e){}}removeBlockingStyleSheet(){let e=document.getElementById("kameleoonPageLoading");if(e&&e.parentNode)e.parentNode.removeChild(e)}removeCSSStyleSheet(e){if(e.loadedCSSStyleSheet){var t=e.loadedCSSStyleSheet.id.replace("kameleoonStyleSheet-","");if(-1==t.indexOf(",")){Kameleoon.Internals.runtime.headNode.removeChild(e.loadedCSSStyleSheet);e.loadedCSSStyleSheet=null}else e.loadedCSSStyleSheet.id="kameleoonStyleSheet-"+t.replace(new RegExp(e.id+",?"),"")}}sendKameleoonCustomEvent(e,t,n){try{let a=document.createEvent("CustomEvent");t.time=(new Date).getTime();a.initCustomEvent("Kameleoon::"+e,!1,!1,t);window.dispatchEvent(a);if(sessionStorage.getItem("kameleoonLightExtension")||Kameleoon.Internals.runtime.parameters.kameleoonLightExtension){t.type=n?n:t.type;window.kameleoonEvents=window.kameleoonEvents||[];window.kameleoonEvents.push(t)}}catch(e){}}setInterval(e,t,n,a){let o=window.setInterval((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),a)}),t);Kameleoon.Internals.runtime.intervalIds[o]=!0;if(n)e();return o}setTimeout(e,t,n){let a=window.setTimeout((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),n)}),t);Kameleoon.Internals.runtime.timeoutIds[a]=!0;return a}testEmptyMap(e){return 0==Object.keys(e).length}parseObjectToUrlParams(e){return Object.entries(e).map((e=>e[0]+"="+e[1])).join("&")}treatContainsSelector(e){let t={},n;function a(e,t){let n=!1;if(t.textContent&&-1!==t.textContent.indexOf(e))n=!0;return n}n=e.match(/:contains\(['"]([\s\S]+)['"]\)/);t.containText=n[1];t.newSelector=e.replace(n[0],"");if(""===t.newSelector)t.newSelector="*";t.check=a;return t}unobfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1)t+=String.fromCharCode(e[n].charCodeAt(0)-16);return t}}Utils.LOCAL_STORAGE_OBFUSCATED_KEYS={kameleoonData:!0,kameleoonSimulationVisitorData:!0};Utils.MAX_STORAGE_DAYS=365;class Browser{constructor(e){this.browsers=e}obtain(){let e=Kameleoon.Internals.runtime.Device.browser;if("Internet Explorer"==e||"Microsoft Edge"==e)e="Explorer";return e}obtainIndex(){let e=this.obtain()||"";let r=e.toUpperCase();for(let e in this.browsers)if(this.browsers[e].name.toUpperCase()==r)return parseInt(e);return null}}class CustomData{constructor(t){this.CUSTOM_DATA_CUTOFF=3*1e3;this.CUSTOM_DATA_INTERVAL=3*1e3;this.CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF=100;this.MAX_INTERVAL_API_VISIT_REQUEST=15*60*1e3;this.MAX_NUMBER_REQUESTS_TO_API_VISIT=3;this.inheritVisitorScopeAndTrackVisitorDataFromServer=()=>{if(Kameleoon.Internals.runtime.Visitor.visits.length>1){const t=Kameleoon.Internals.runtime.Visitor.currentVisit.customData;const e=Kameleoon.Internals.runtime.Visitor.visits[Kameleoon.Internals.runtime.Visitor.visits.length-2].customData;for(const a in this.customData){const i=this.customData[a].scope;if("VISITOR"==i&&null==t[a]){const t=e[a];if(null!=t)this.register(parseInt(a),{value:t,overwrite:!0},!0)}}Kameleoon.Internals.runtime.Visitor.saveToStoredData()}};this.register=(t,e,a)=>{const i=this.customData[t];if(i){let s={};const n=e.value;if(null==n)return;const r=e.overwrite;if(a)s=n;else if(n instanceof Array){for(let t=0,e=n.length;t<e;++t)if(null!=n[t]&&(n[t].toString().length<=VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||i.localOnly))s[n[t]]=1}else if(n.toString().length<=VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||i.localOnly)s[n]=1;const o="LIST"==i.type||"COUNT_LIST"==i.type?r:!0;if(o||!Kameleoon.Utils.testEmptyMap(s)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"CustomDataSet",{name:i.name,value:n});Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"customData/set",name:i.name,value:n});Kameleoon.Gatherer.track(VisitEvent_CustomData,{index:t,customData:i,overwrite:o,overwriteDefault:r,valueToAdd:s,value:n})}}};this.customDataVisitsRequest=t=>{};this.run=()=>{Kameleoon.Internals.runtime.Visitor.currentVisit.clearCustomDataPage();Kameleoon.Utils.clearInterval(this.intervalId);if(Kameleoon.Internals.runtime.Gatherer.startOfVisit)this.inheritVisitorScopeAndTrackVisitorDataFromServer();this.firstTimeCheck=(new Date).getTime();this.intervalId=Kameleoon.Utils.setInterval(this.obtain.bind(this),this.CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF,!0);Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(this.intervalId)}),this.CUSTOM_DATA_CUTOFF);Kameleoon.Utils.setInterval(this.obtain.bind(this),this.CUSTOM_DATA_INTERVAL,!1)};this.customData=t}parseNumberValue(t,e){switch(t){case-2:return"true"===e;case-1:return e;default:return parseFloat(e)}}obtainParsedValue(t,e){const a=this.customData[t];switch(a.type){case"COUNT_LIST":const t=[];for(const a in e)t.push({value:a,count:e[a]});return t;case"LIST":const i=[];for(const t in e)i.push(t);return i;default:return this.parseNumberValue(a.format,Object.keys(e)[0])}}obtain(){for(const t in this.customData)if(!this.customData[t].treated){const e=parseInt(t);const a=this.obtainValueMap(e,this.customData[t]);if(a)this.register(e,a)}}obtainValueFromPath(t,e){return t.match(/[^'\]\[\.\"]+/gi).reduce(((t,e)=>t&&t[e]),e)}obtainValueMap(t,e){let a=null;if(null!=e&&!e.disabled)switch(e.method.toUpperCase()){case"GTM":if(window.dataLayer&&e.variableName)for(let t=window.dataLayer.length-1;t>=0;--t){const i=this.obtainValueFromPath(e.variableName,window.dataLayer[t]);if(null!=i){a={value:i,overwrite:!1};break}}break;case"TC":if(window.tc_vars&&e.variableName){let t=this.obtainValueFromPath(e.variableName,window.tc_vars);if("string"==typeof t&&0==t.length)t=null;if(null!=t){a={value:t,overwrite:!1};break}}break;case"TEALIUM":if(window.utag&&window.utag.data&&e.variableName){let t=this.obtainValueFromPath(e.variableName,window.utag.data);if("string"==typeof t&&0==t.length)t=null;if(null!=t){a={value:t,overwrite:!1};break}}break;case"CUSTOM_CODE":a=Kameleoon.Utils.runProtectedScript(e.customEvalCode,"kameleoonCustomDataScript-"+t+".js");break;default:break}if(null!=a){e.treated=!0;const i=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[t];const s=a.value;if(null!=s){const t=e.type;if("LIST"==t||"COUNT_LIST"==t||null==i||Object.keys(i)[0]!=s.toString()||Kameleoon.Internals.configuration.enableHistoryReconciliation&&e.mappingIdentifier&&null==Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","visitsRequestSuccess"))return a}}return null}}class KeyPage{constructor(e){this.keyPages=e}obtainIndexes(){const e=[];if(0==e.length)e.push(null);return e}}class Language{constructor(){this.DEFAULT_LOCALE_LANGUAGE_TAG="en"}obtainLocaleTag(){const a=navigator&&navigator.language;return a||this.DEFAULT_LOCALE_LANGUAGE_TAG}}class OperatingSystem{constructor(e){this.oss=e}obtainIndex(){const e=this.obtain().toUpperCase();for(const s in this.oss)if(this.oss[s].name.toUpperCase()==e)return parseInt(s);return null}obtain(){const e=(Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent)).os.name;switch(e){case"Windows Phone":case"iOS":case"Android":case"Linux":case"Windows":return e;case"macOS":return"Tablet"==Kameleoon.Internals.runtime.Device.type?"iOS":"Mac";default:return"Other"}}}class Referrer{constructor(e){this.referrers=e;this.referrer=document.referrer;const t="kameleoonReferrer";const r=Kameleoon.Utils.readLocalData(t,"COOKIE");if(r){this.referrer=r;Kameleoon.Utils.eraseLocalData(t,null,"COOKIE")}}obtainCorrected(e){switch(this.obtainType(e)){case 0:case 1:return null;default:return this.obtain()}}obtain(){return this.referrer}obtainDetectionMatches(e){let t=this.obtainDetectionPartMatches(e.method,e.parameters);if(e.and)t=t&&this.obtainDetectionPartMatches(e.andMethod,e.andParameters);return t}obtainDetectionPartMatches(e,t){switch(e.toUpperCase()){case"REFERRER_REGEX":try{return new RegExp(t).test(this.obtain())}catch(e){console.log(e);return!1}case"URL_REGEX":const e=new RegExp(t);return e.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||e.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL());default:try{return!0===Kameleoon.Utils.runProtectedScript(t)}catch(e){return!1}}}obtainIndexes(e){switch(this.obtainType(e)){case 0:case 1:return[0];default:let e=[];let t=Number.NEGATIVE_INFINITY;for(const r in Kameleoon.Internals.runtime.Gatherer.configuration.referrers){const n=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[r];if(this.obtainMatches(n)){let a=n.priority;if(null==a)a=Number.NEGATIVE_INFINITY;if(a>=t){if(a>t){e=[];t=a}e.push(parseInt(r)+1)}}}if(0==e.length)e.push(null);return e}}obtainIsIgnored(e){return!1}obtainMatches(e){const t=e.detections;for(let e=0;e<t.length;e++)if(this.obtainDetectionMatches(t[e]))return!0;return!1}obtainType(e){if(this.obtainIsIgnored(e))return 0;if(Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","startsOfVisitForCurrentPage")>1)return 1;return 3}}class StoredData{constructor(e){this.Gatherer={};this.Runtime={};this.Vars=Kameleoon.Utils.readLocalData("kameleoonVars","LS")||{};this.Visitor={};this.canSave=!1;if(e){let a="";if(e[Kameleoon.Internals.runtime.dataKeyName]){a=e[Kameleoon.Internals.runtime.dataKeyName];if(e.Kameleoon)Kameleoon.Utils.eraseLocalData("kameleoonData",null,"LS")}else if(e.kameleoonData)a=e.kameleoonData;if(Kameleoon.Internals.runtime.simulationMode)if(e.kameleoonDataSimulation||e.kameleoonSimulationVisitorData)a=e.kameleoonDataSimulation||e.kameleoonSimulationVisitorData;let t=Kameleoon.Utils.unobfuscateString(a);let i=t&&JSON.parse(t)||{};this.Gatherer=i.Gatherer||{};this.Runtime=i.Runtime||{};this.Vars=i.Vars||e.kameleoonVars||{};this.Visitor=i.Visitor||{}}else{let e=Kameleoon.Utils.readLocalData("kameleoonData","LS");if(Kameleoon.Internals.runtime.simulationMode){const a=Kameleoon.Utils.readLocalData("kameleoonDataSimulation","LS",!0);const t=Kameleoon.Utils.readLocalData("kameleoonSimulationVisitorData","LS",!0);if(a||t)e=a||t}if(e){this.Gatherer=e.Gatherer;this.Runtime=e.Runtime||{};this.Vars=e.Vars||this.Vars;this.Visitor=e.Visitor}}Kameleoon.Utils.eraseLocalData("kameleoonVars",null,"LS");for(let e in this.Vars)if(Kameleoon.Internals.runtime.pageStartTime>this.Vars[e].date)delete this.Vars[e];Kameleoon.Utils.setInterval((()=>{if(this.canSave){this.save(!0);this.canSave=!1}}),1e3);Kameleoon.Utils.addEventListener(window,Kameleoon.Internals.runtime.beforeUnloadEvent,(()=>{if(window.self!==window.top){let e=Kameleoon.Utils.readLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,"LS");if(e&&e.Visitor&&this.Visitor&&this.Visitor.totalVisits<e.Visitor.totalVisits)this.update(e)}this.save(!0)}))}obtainField(e,a,t){return this[e][a]||t||null}resetForStartOfVisit(){this.Runtime={}}saveField(e,a,t){this[e][a]=t;this.save(!1)}save(e){if(e)Kameleoon.Utils.createLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,this,Kameleoon.Internals.runtime.simulationMode?1/24:Utils.MAX_STORAGE_DAYS,null,"LS",!0);else this.canSave=!0}update(e){this.Gatherer=e.Gatherer||this.Gatherer;this.Runtime=e.Runtime||this.Runtime;this.Vars=e.Vars||this.Vars;this.Visitor=e.Visitor||this.Visitor}}class TimeZone{constructor(){}obtainId(){let t;try{t="undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions?Intl.DateTimeFormat().resolvedOptions().timeZone:null}catch(e){t=null}return t}}class VisitEvent{constructor(e){this.eventType=e.type;this.visitEvent=e}track(e){let t=()=>{let t=new this.visitEvent(e);Kameleoon.Internals.runtime.Visitor.saveToStoredData();if((!e||!e.notTrack&&!t.notTrack)&&Kameleoon.Internals.configuration.track)Kameleoon.Internals.runtime.RequestManager.addRequest(t);Kameleoon.Internals.runtime.storedData.save(this.visitEvent.urgent)};if(!Kameleoon.Internals.runtime.Visitor.currentVisit.isVisitFinished())t();else if(this.eventType==VisitEvent_Activity.type&&Kameleoon.Internals.runtime.Gatherer.active){Kameleoon.Internals.runtime.Visitor=new Visitor;Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData);Kameleoon.Gatherer.CustomData.run();Kameleoon.Internals.runtime.gathererRun=!0;t()}}}class VisitEvent_Main{constructor(t){this.obtainRequestData=()=>{let t="eventType="+this.eventType;for(let e in this){if("function"==typeof this[e]||VisitEvent_Main.NOT_TRACK_FIELD[e])continue;t+=`&${e}=${this.addValueParameter(this[e])}`}return t};this.addValueParameter=t=>{if("object"==typeof t)return encodeURIComponent(JSON.stringify(t));else if("string"==typeof t)return encodeURIComponent(t);return t};this.time=(new Date).getTime();this.nonce=Kameleoon.Utils.obtainRandomString(VisitEvent_Main.NONCE_LENGTH,VisitEvent_Main.HEXADECIMAL_ALPHABET)}}VisitEvent_Main.HEXADECIMAL_ALPHABET="0123456789ABCDEF";VisitEvent_Main.NONCE_LENGTH=16;VisitEvent_Main.NOT_TRACK_FIELD={eventType:1,time:1,notTrack:1,type:1,urgent:1};class VisitEvent_Activity extends VisitEvent_Main{constructor(){super();this.eventType=VisitEvent_Activity.type;this.clicks=Kameleoon.Internals.runtime.Gatherer.clicks;Kameleoon.Internals.runtime.Visitor.currentVisit.addActivity(this.time,Kameleoon.Internals.runtime.Gatherer.active);Kameleoon.Internals.runtime.Visitor.currentVisit.addNumberClicks(this.clicks);Kameleoon.Internals.runtime.Gatherer.active=!1;Kameleoon.Internals.runtime.Gatherer.clicks=0}static initialize(){let e=()=>{Kameleoon.Internals.runtime.Gatherer.active=!0};let t=()=>{e();Kameleoon.Internals.runtime.Gatherer.clicks++};Kameleoon.Utils.addEventListener(document,"mousemove",e,!1);Kameleoon.Utils.addEventListener(document,"scroll",e,!1);Kameleoon.Utils.addEventListener(document,"click",t,!1);Kameleoon.Utils.setInterval((()=>{if(Kameleoon.Internals.runtime.Gatherer.active)Kameleoon.Gatherer.track(this)}),this.ACTIVITY_TRACKING_INTERVAL,!0)}}VisitEvent_Activity.ACTIVITY_TRACKING_INTERVAL=15*1e3;VisitEvent_Activity.type="activity";VisitEvent_Activity.urgent=!1;class VisitEvent_AdBlocker extends VisitEvent_Main{constructor(){super();this.eventType=VisitEvent_AdBlocker.type;Kameleoon.Internals.runtime.Visitor.currentVisit.addAdBlocker()}}VisitEvent_AdBlocker.type="adBlocker";VisitEvent_AdBlocker.urgent=!1;class VisitEvent_Conversions extends VisitEvent_Main{constructor(e){super();this.eventType=VisitEvent_Conversions.type;this.goalId=e.goalId;this.negative=!0===e.negative;let i,t=!1;let n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","revenuesByGoalId",{});let s=n[this.goalId];if(this.negative)if(s&&s.length>0){i=s.splice(-1)[0];if(0==s.length)delete n[this.goalId]}else t=!0;else{i=e.revenue;if(isNaN(i))i=0;if(!s)s=[];s.push(i);n[this.goalId]=s.splice(-10)}this.revenue=i;if(!t){Kameleoon.Internals.runtime.storedData.saveField("Gatherer","revenuesByGoalId",n);Kameleoon.Internals.runtime.Visitor.currentVisit.addConversions(this.goalId,1,this.revenue,this.negative);}}}VisitEvent_Conversions.type="conversion";VisitEvent_Conversions.urgent=!0;class VisitEvent_CustomData extends VisitEvent_Main{constructor(t){super();this.eventType=VisitEvent_CustomData.type;this.index=t.index;this.overwrite=t.overwrite||!1;this.notTrack=t.value.length>VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||t.customData.localOnly;this.valuesCountMap=t.valueToAdd;this.mappingIdentifier=1==t.customData.mappingIdentifier?"true":"false";Kameleoon.Internals.runtime.Visitor.currentVisit.addCustomData(this.index,this.valuesCountMap,this.overwrite);if("PAGE"===t.customData.scope)this.overwrite=t.overwriteDefault||!1}}VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST=1e3;VisitEvent_CustomData.type="customData";VisitEvent_CustomData.urgent=!0;class VisitEvent_Page extends VisitEvent_Main{constructor(){super();this.eventType=VisitEvent_Page.type;const e=Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL();const t=document.title;const r=Kameleoon.Utils.computeCurrentPageCanonicalURL();const i=Kameleoon.Gatherer.Referrer.obtainCorrected(Kameleoon.Internals.runtime.Gatherer.startOfVisit);this.href=e&&e.slice(0,Kameleoon.Gatherer.MAX_HREF_LENGTH_IN_A_REQUEST);this.title=t.slice(0,Kameleoon.Gatherer.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST);this.keyPagesIndices=Kameleoon.Gatherer.KeyPage.obtainIndexes();this.referrersIndices=Kameleoon.Gatherer.Referrer.obtainIndexes(Kameleoon.Internals.runtime.Gatherer.startOfVisit);if(r)this.canonicalHref=r;if(null!=i)this.referrerHref=i;if(Kameleoon.Internals.configuration.cleanHrefTracking){if(this.href)this.href=this.href.replace(/(\?|\#)(.*)/gi,"");if(this.referrerHref)this.referrerHref=this.referrerHref.replace(/(\?|\#)(.*)/gi,"")}Kameleoon.Internals.runtime.Visitor.currentVisit.addPage(this.time,e,this.keyPagesIndices,this.referrersIndices);Kameleoon.Internals.runtime.Visitor.currentVisit.addActivity(this.time,!0)}}VisitEvent_Page.type="page";VisitEvent_Page.urgent=!0;class VisitEvent_Product extends VisitEvent_Main{constructor(t){super();this.eventType=VisitEvent_Product.type;this.ean=t.ean;Kameleoon.Internals.runtime.Visitor.currentVisit.addProduct(this.ean)}}VisitEvent_Product.type="productPage";VisitEvent_Product.urgent=!1;class VisitEvent_StaticData extends VisitEvent_Main{constructor(){super();this.eventType=VisitEvent_StaticData.type;this.obtainInfluences=(e,i)=>{let t={experiments:{},personalizations:{}};let n=e=>{for(let i in e)if(e[i][1]<0||"-1"==i||null==e[i][0]||"null"==e[i][0])delete e[i];return e};e.forEach((({ExperimentActivations:e,PersonalizationActivations:n})=>{for(let n in e){let s=e[n];if(s.influence){let e=s.influence-(i-s.times.slice(-1)[0]);t.experiments[n]=[parseInt(s.associatedVariationID),e]}}for(let e in n){let s=n[e];if(s.influence){let n=s.influence-(i-s.times.slice(-1)[0]);t.personalizations[e]=[1,n]}}}));this.experimentInfluences=n(t.experiments);this.personalizationInfluences=n(t.personalizations)};const{Visitor:e,Device:i}=Kameleoon.Internals.runtime;const{Browser:t,OperatingSystem:n,TimeZone:s,Language:a}=Kameleoon.Gatherer;this.timeSincePreviousVisit=e.obtainTimeSincePreviousVisit();this.browser=t.obtain();this.browserIndex=t.obtainIndex();this.browserVersion=i.browserVersion;this.os=n.obtain();this.osIndex=n.obtainIndex();this.windowWidth=i.windowWidth;this.windowHeight=i.windowHeight;this.screenWidth=i.screenWidth;this.screenHeight=i.screenHeight;this.timeZoneId=s.obtainId();this.localeLanguageTag=a.obtainLocaleTag();this.deviceType=i.type.toLocaleUpperCase();this.visitNumber=e.currentVisit.visitNumber;this.obtainInfluences(e.visits,e.currentVisit.startDate)}}VisitEvent_StaticData.type="staticData";VisitEvent_StaticData.urgent=!0;class CommandQueue{constructor(e,o){this.executeCommand=e=>{try{if(e.command)e=e.command;if("function"===typeof e)e();else{let o=e[0];let s=o.split(".");let m;let t;if("Kameleoon"!=s[0]){m=Kameleoon.API;t=Kameleoon.API[s[0]]}else t=Kameleoon.API[s[2]];s.forEach((e=>{if(null==m)m=window[e];else m=m[e]}));m.apply(t,Array.prototype.slice.call(e,1))}}catch(e){console.log(e)}};this.commands=e&&e.forEach?e:[];this.commands.push=e=>{if("IMMEDIATE"==o)e.level==o?this.executeCommand(e):this.commands.unshift(e);else this.executeCommand(e)};let s=[];if("IMMEDIATE"==o)this.commands.forEach(((e,o)=>{if("IMMEDIATE"==e.level){s.push(e);this.commands.splice(o,1)}}));else{this.commands.forEach((e=>{s.push(e)}));this.commands.splice(0,this.commands.length)}s.forEach(this.executeCommand);return this.commands}}class Campaigns{constructor(){this.experiments={};this.personalizations={}}addCampaign(i){if(i.experimentAction)this.experiments[i.id.toString()]=i;else this.personalizations[i.id.toString()]=i}obtainCampaign(i,t){if(null!=i){i=i.toString();if(null!=t){const n=t?"experiments":"personalizations";return this[n][i]}return this.experiments[i]||this.personalizations[i]}}obtainCampaignsList(i){return Object.values(this[i])}}class Consent{constructor(){this.disable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/disable",consentType:e});if(e&&"BOTH"!=e)this[e]=!1;else{this.AB_TESTING=!1;this.PERSONALIZATION=!1}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.enable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/enable",consentType:e});if(e&&"BOTH"!=e)this[e]=!0;else{this.AB_TESTING=!0;this.PERSONALIZATION=!0}if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.RequestManager){if(Kameleoon.Internals.configuration.requestsAfterConsent)Kameleoon.Internals.runtime.loadExternalRequests();Kameleoon.Internals.runtime.RequestManager.processRequests();this.purge()}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.getConfiguredConsent=()=>({AB_TESTING:Kameleoon.Internals.configuration.abtestConsent,PERSONALIZATION:Kameleoon.Internals.configuration.personalizationConsent});this.getConsent=()=>({AB_TESTING:this.AB_TESTING,PERSONALIZATION:this.PERSONALIZATION});this.hasGlobalConsent=()=>this.AB_TESTING||this.PERSONALIZATION||Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.kameleoonFull;this.initialize=e=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/initialize",consent:e});this.AB_TESTING=e.AB_TESTING;this.PERSONALIZATION=e.PERSONALIZATION;this.initializeIAB()};this.initializeIAB=()=>{};this.purge=()=>{if(Kameleoon.Internals.runtime){const e=e=>{if(null!=e)for(const n in e)Kameleoon.Utils.createLocalData(e[n].name,e[n].value,e[n].days,e[n].domain,e[n].forceLocalAccess,e[n].jsonFormat,null,!0)};e(Kameleoon.Internals.runtime.localDataMap&&Kameleoon.Internals.runtime.localDataMap["LS"]);e(Kameleoon.Internals.runtime.localDataMap&&Kameleoon.Internals.runtime.localDataMap["COOKIE"]);Kameleoon.Internals.runtime.localDataMap=null;}};this.setup=()=>{let e={AB_TESTING:!1,PERSONALIZATION:!1};const n=Kameleoon.Internals.runtime.readFromStorageOrExternal("kameleoonLegalConsent","LS");if(null!=n)if(1==n)e={AB_TESTING:!0,PERSONALIZATION:!0};else e=n;else{e={AB_TESTING:"OFF"==Kameleoon.Internals.configuration.abtestConsent?!0:null,PERSONALIZATION:"OFF"==Kameleoon.Internals.configuration.personalizationConsent?!0:null};}this.initialize(e)};this.write=()=>{Kameleoon.Utils.createLocalData("kameleoonLegalConsent",this.getConsent(),Utils.MAX_STORAGE_DAYS,null,"LS",!0,null,!0)};this.AB_TESTING=!1;this.PERSONALIZATION=!1}}class Device{constructor(){const e=Kameleoon.Utils.bowser.parsedResult=Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent);let t=e.browser.version;try{if(t.split(".").length>1)t=t.split(".")[0]+"."+t.split(".")[1]}catch(e){}this.browser=e.browser.name||"Other";this.browserVersion=t?parseFloat(t):null;this.type="tablet"==e.platform.type?"Tablet":"mobile"==e.platform.type?"Phone":"Desktop";if("Safari"==this.browser&&"Desktop"==this.type&&"ontouchend"in document.documentElement)this.type="Tablet"}get adBlocker(){return Kameleoon.Internals.runtime.adBlocker}get os(){return Kameleoon.Gatherer.OperatingSystem.obtain()}get screenHeight(){return window.screen.height}get screenWidth(){return window.screen.width}get timeZone(){return Kameleoon.Gatherer.TimeZone.obtainId()}get windowHeight(){return window.innerHeight}get windowWidth(){return window.innerWidth}}class Goals{constructor(){this.checkKameleoonGoals=()=>{const e=[];const n=[];const o=[];const s=[];Kameleoon.Internals.runtime.goals.forEach((t=>{switch(t.type){case"URL":{const n=new RegExp(t.url);if(n.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))e.push({goal:t});break}case"PAGE_VIEWS":if(Kameleoon.Internals.runtime.gathererRun){const n=Kameleoon.Internals.runtime.Visitor.currentVisit.obtainPageNumberViews();if((null==t.minPageViews||n>=t.minPageViews)&&(null==t.maxPageViews||n<=t.maxPageViews))e.push({goal:t})}break;case"ENGAGEMENT":n.push({goal:t});break;case"TIME_SPENT":o.push(t);break;case"SCROLL":s.push(t);break}}));if(e.length>0)this.processConversions(e);Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,(e=>{this.processConversions(n)}),!0);if(o.length>0)Kameleoon.Utils.setInterval((()=>{const e=[];o.forEach((n=>{const o=Kameleoon.Internals.runtime.Visitor.currentVisit.lastActivityDate-Kameleoon.Internals.runtime.Visitor.currentVisit.startDate;if((null==n.minTimeSpent||o>=n.minTimeSpent)&&(null==n.maxTimeSpent||o<=n.maxTimeSpent))e.push({goal:n})}));if(e.length>0)this.processConversions(e)}),1e3);};this.processConversions=e=>{if(Kameleoon.Internals.runtime.gathererRun)for(let n=0,o=e.length;n<o;++n){const o=e[n];const s=o.goal;const t=!0===o.negative;if(t||"PAGE_VIEWS"!=s.type&&"TIME_SPENT"!=s.type&&"ENGAGEMENT"!=s.type||0==Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(s.id)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ConversionTriggered",new APIGoal(s),"goal/process");Kameleoon.Gatherer.track(VisitEvent_Conversions,{goalId:s.id,revenue:o.revenue?o.revenue:0,negative:t});}}}}}class KMutationObserver{static addMutationElementsToInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n&&n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static checkSelectorInDomTree(e){if(!e.selectors)KMutationObserver.fillClassesAndIdsForSelector(e);if(0===e.selectorClasses.length&&0===e.selectorIDs.length)return!0;let t=!1;for(let n=0;n<e.selectors.length;++n){if(t)break;if(KMutationObserver.checkIDsForSelector(e.selectorIDs[n],e)&&KMutationObserver.checkClassesForSelector(e.selectorClasses[n],e))t=!0}return t}static fillClassesAndIdsForSelector(e){const t=[];const n=[];const o=e.selector&&e.selector.split(",")||[];if(e.currentQuery&&e.selector!=e.currentQuery)o.push(e.currentQuery);o.forEach((e=>{if(-1!==e.indexOf(".")||-1!==e.indexOf("#")){let o;let r;if(-1!==e.indexOf("\\")||-1!==e.indexOf("contains")||-1!==e.indexOf(":not")){const t=e.replace(/(:[^:]+\(.+?\)|\\)/g,"").replace(/(\-)?(\[.*?\])/g,((e,t)=>t?e:""));o=t.match(/\.([^\s.]+)/g);r=t.match(/#([^\s:\[]+)/g)}else{o=e.match(/\.([^\s.:\[]+)/g);r=e.match(/#([^\s:\[>]+)/g)}n.push(o||[]);t.push(r||[])}}));e.selectors=o;e.selectorClasses=n;e.selectorIDs=t;return e}static checkClassesForSelector(e,t){if(null==e)return!0;for(let t=0,n=e.length;t<n;++t){const n=e[t];if(-1===n.indexOf("kameleoon")&&null==Kameleoon.Internals.runtime.addedClasses[n])return!1}return!0}static checkIDsForSelector(e,t){if(null==e)return!0;let n;if(t.options)n=t.options.domReference;for(let o=0,r=e.length;o<r;++o){const r=e[o];if(-1!==r.indexOf("kameleoonElement")){if(n){const e=KMutationObserver.fillClassesAndIdsForSelector({selector:n,checkDomReference:!0});if(!KMutationObserver.checkIDsForSelector(e.selectorIDs[0],e))return!1}if(t.checkDomReference)if(null==Kameleoon.Internals.runtime.addedIDs[r])return!1}else if(null==Kameleoon.Internals.runtime.addedIDs[r])return!1}return!0}static fillInternalObjectsForMutationObserver(e){if(!e)e=document;const t=e.getElementsByTagName("*");for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static removeMutationElementsFromInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)if(1==Kameleoon.Internals.runtime.addedIDs["#"+n.id])delete Kameleoon.Internals.runtime.addedIDs["#"+n.id]}}static performWaitingElementPresentObject(){for(let e=Kameleoon.Internals.runtime.waitingElementPresentObjects.length-1;e>=0;e-=1){const t=Kameleoon.Internals.runtime.waitingElementPresentObjects[e];if(t&&t.useAntiFlicker)if(KMutationObserver.checkSelectorInDomTree(t)){const n=Kameleoon.Utils.querySelectorAll(t.selector);if(0<n.length){Kameleoon.Utils.runProtectedFunction((function(){t.callback(n)}),!0);Kameleoon.Internals.runtime.waitingElementPresentObjects.splice(e,1)}}}}static performVariationsElementSet(e){}static performAsyncMutations(){Kameleoon.Internals.runtime.domMutationThrottling=!0;if(!KMutationObserver.asyncMutationsTimeoutId)KMutationObserver.asyncMutationsTimeoutId=Kameleoon.Utils.setTimeout((()=>{if(KMutationObserver.mutationList.length>=KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION)KMutationObserver.fillInternalObjectsForMutationObserver();else KMutationObserver.mutationList.forEach((e=>{const t=e.addedNodes,n=e.removedNodes;const o=Array.prototype.slice.call(t);const r=Array.prototype.slice.call(n);const s=o.concat(r);KMutationObserver.removeMutationElementsFromInternalObjects(n);KMutationObserver.addMutationElementsToInternalObjects(t);for(let t=0;t<s.length;++t){const n=s[t];if(n&&n.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(n)}}));KMutationObserver.mutationList=[];KMutationObserver.performWaitingElementPresentObject();KMutationObserver.performVariationsElementSet(!0);Kameleoon.Utils.clearTimeout(KMutationObserver.asyncMutationsTimeoutId);KMutationObserver.asyncMutationsTimeoutId=null}),250)}static setMutationObserver(){if(Kameleoon.Internals.runtime.cantUseMutationObserver)return;KMutationObserver.fillInternalObjectsForMutationObserver();const e=document.documentElement;const t={attributes:!0,childList:!0,characterData:!0,subtree:!0};if(!Kameleoon.Internals.runtime.mutationObserver)Kameleoon.Internals.runtime.mutationObserver=new MutationObserver((function(e){let t=!0;if(!Kameleoon.Internals.runtime.domReady&&e.length>=KMutationObserver.MAX_MUTATIONS_LENGTH){KMutationObserver.mutationList=KMutationObserver.mutationList.concat(e);KMutationObserver.performAsyncMutations();return}e.forEach((e=>{const n=e.addedNodes,o=e.removedNodes;const r=Array.prototype.slice.call(n);const s=Array.prototype.slice.call(o);const a=r.concat(s);KMutationObserver.removeMutationElementsFromInternalObjects(o);KMutationObserver.addMutationElementsToInternalObjects(n);for(let n=0;n<a.length;++n){const o=a[n];if((Kameleoon.Internals.runtime.editorMode||Kameleoon.Internals.runtime.kameleoonSelectionIframeMode)&&o&&o.id&&"string"==typeof o.id&&null!==o.id.match("kameleoon"))if(o.closest&&null!==o.closest(".KameleoonProtected"))t=!1;if(t&&o&&o.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(o)}}));KMutationObserver.performWaitingElementPresentObject();KMutationObserver.performVariationsElementSet(t)}));if("function"===typeof Kameleoon.Internals.runtime.mutationObserver.observe)Kameleoon.Internals.runtime.mutationObserver.observe(e,t);if(Kameleoon.Internals.runtime.singlePageSupport)KMutationObserver.setMutationObserverSPA()}static setMutationObserverSPA(){if(Kameleoon.Internals.runtime.mutationObserverSpa)return;Kameleoon.API.Core.runWhenElementPresent("body",(e=>{Kameleoon.Internals.runtime.mutationObserverSpa=new MutationObserver((function(){Kameleoon.Internals.runtime.listenVariations=[];Kameleoon.Internals.runtime.mutationObserverSpa.disconnect();if(Kameleoon.ElementSet)KMutationObserver.checkElementSetIntegrity();KMutationObserver.checkDynamicElements();t()}));const t=()=>{Kameleoon.Internals.runtime.mutationObserverSpa.observe(e[0],{childList:!0,characterData:Kameleoon.ElementSet&&Kameleoon.ElementSet.pageElementSetsSpa.length>0,subtree:!0})};t()}))}}KMutationObserver.MAX_MUTATIONS_LENGTH=3e3;KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION=5e3;KMutationObserver.asyncMutationsTimeoutId=null;KMutationObserver.mutationList=[];KMutationObserver.checkDynamicElements=()=>{Kameleoon.Internals.runtime.waitingDynamicElements.forEach((e=>{const t=Kameleoon.Utils.querySelectorAll(e.selector).filter((t=>null==t.getAttribute(e.attribute)));t.length>0&&e.callback(t)}))};KMutationObserver.checkElementSetIntegrity=()=>{};KMutationObserver.resetElementSet=(e,t,n)=>{};KMutationObserver.containsDomOperationElements=e=>{};class Logger{constructor(){this.MAX_REQUESTS_PER_VISIT=3;this.baseUrl="https://logger.kameleoon.com/api/2/store/?sentry_key=d8dc96c209184885ab9643cbaf1eb86f&sentry_version=7";this.canSend=()=>{if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.Consent.hasGlobalConsent())if(this.errorLoggerIds.length<this.MAX_REQUESTS_PER_VISIT){let e=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","loggerPopulation");if(null==e){this.population=e=Math.random();Kameleoon.Internals.runtime.storedData.saveField("Runtime","loggerPopulation",e)}if(e<.01)return!0}return!1};this.generateRandomIdAsString=(e,t,n)=>Kameleoon.Utils.computeStringSha256(e+t+n).substr(0,32);this.generateRequestDataAsString=(e,t,n,r)=>{let o={tags:{siteCode:Kameleoon.Internals.configuration.siteCode},user:{},environment:Kameleoon.Internals.configuration.environment,platform:"javascript",event_id:t,request:{url:location.href,headers:{"User-Agent":navigator.userAgent}},exception:{values:[{type:e.name,value:e.stack?e.stack:e.message,stacktrace:{frames:[{filename:n}]},mechanism:{data:{mode:"stack",message:e.stack?e.stack:e.message,name:e.name},handled:!1,type:"onerror"}}]}};if(r){o.tags["action-id"]=r.id;o.tags["action-name"]=r.name;o.tags["action-type"]=r.experimentAction?"experiment":"personalization"}try{o.user={id:Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.Visitor&&Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode}}catch(e){o.user={id:"no_visitor_code"}}return JSON.stringify(o)};this.send=(e,t,n)=>{if("DEVELOPMENT"==Kameleoon.Internals.configuration.environment)console.error(e);try{this.errorLoggerIds=Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.storedData.obtainField("Runtime","loggerRequestsSend")||this.errorLoggerIds;let r=this.generateRandomIdAsString(e.message,Kameleoon.Internals.configuration.siteCode,Kameleoon.Internals.configuration.environment);if(-1==this.errorLoggerIds.indexOf(r)){this.errors.push(e);let o=e.stack?e.stack:e.message;if(this.canSend()&&o&&o.trim().length>0){let o=new XMLHttpRequest;o.open("POST",this.baseUrl,!0);o.timeout=2e3;o.send(this.generateRequestDataAsString(e,r,t,n));Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.storedData.saveField("Runtime","loggerRequestsSend",this.errorLoggerIds)}this.errorLoggerIds.push(r);if(Kameleoon.Internals.runtime.parameters.kameleoonDebug||localStorage.kameleoonExtensionIsAdmin)console.log(e)}}catch(t){this.errors.push(e)}};this.errorLoggerIds=[];this.errors=[]}}class OnlineMeanAndDeviation{constructor(e){this.dimension=e;this.mean=[];this.nbUpdates=[];this.m2=[];this.deviation=[];for(let t=0;t<e;++t){this.mean[t]=0;this.nbUpdates[t]=0;this.m2[t]=0;this.deviation[t]=0}this.update=(e,t=1)=>{if(t>0)for(let n=0;n<this.dimension;++n)if(!isNaN(e[n])&&isFinite(e[n])){let i=this.mean[n]-e[n];let a=this.nbUpdates[n]+t;this.m2[n]=this.m2[n]+i/a*i*this.nbUpdates[n]*t;this.deviation[n]=Math.sqrt(this.m2[n]/a);this.mean[n]=this.mean[n]/a*this.nbUpdates[n]+e[n]/a*t;this.nbUpdates[n]=a}}}}OnlineMeanAndDeviation.createFromDifferences=(e,t,n,i)=>{let a=new OnlineMeanAndDeviation(1);let s=e.length;let l=0;if(l<s){let h=e[l];l++;while(l<s){let s=e[l];l++;let o=s-h;if(o<0&&t||0==o&&n||o>0&&i)a.update([o]);h=s}}return a};OnlineMeanAndDeviation.createFromValues=e=>{let t=new OnlineMeanAndDeviation(1);for(let n=0,i=e.length;n<i;n++)t.update([e[n]]);return t};OnlineMeanAndDeviation.createFromBooleanValues=e=>{let t=new OnlineMeanAndDeviation(1);for(let n=0,i=e.length;n<i;n++)t.update([e[n]?1:0]);return t};class RequestManager{constructor(){this.errorKey="kameleoonRequestEvents";this.processRequests=()=>{if(this.callbacksToExecute.length>0&&Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){const e=this.callbacksToExecute.splice(0,1e3);e.forEach((e=>e()))}if(this.eventsToSend.length>0)if(this.validateTrackingRequest())if((!Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.enableRemoteVisitorSynchronization)&&!Kameleoon.Internals.runtime.proxyMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode){const e=this.eventsToSend.splice(0,1e3);const t=this.obtainRequestBody(e);this.send(this.obtainVisitUrl(),"POST",t,(()=>{}),(()=>{this.createErrorEventsQueue(t)}));if(this.eventsToSend.length>0)this.processRequests()}};this.obtainRequestBody=e=>{let t="";t+=e.reduce(((e,t)=>{if(!t.notTrack)e+=t.obtainRequestData()+"\n";return e}),"");if(sessionStorage.getItem(this.errorKey)){t+=sessionStorage.getItem(this.errorKey);sessionStorage.removeItem(this.errorKey)}return t};this.obtainVisitUrl=()=>{const e=Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode;return`${this.url}/visit/events?siteCode=${this.siteCode}&visitorCode=${e}&itp=${"Safari"===Kameleoon.Internals.runtime.Device.browser}`};this.obtainIpUrl=()=>this.url+"/ip";this.obtainGeolocationUrl=()=>this.url+"/geolocation";this.send=(e,t,s,n,o,i)=>{const r=new XMLHttpRequest;r.open(t,e,!0);if(n)r.onreadystatechange=function(e){n.bind(r)(e.target)};if(o){r.onabort=function(e){o.bind(r)(e.target)};r.onerror=function(e){o.bind(r)(e.target)};r.ontimeout=function(e){o.bind(r)(e.target)}}r.timeout=i||15*60*1e3;r.send("POST"==t&&s?s:null);};this.sendActiveScript=()=>{};this.sendProduct=(e,t)=>{this.send(`${this.url}/product/events?siteCode=${this.siteCode}&ean=${encodeURIComponent(e.toString())}`,"POST",t);};this.eventsToSend=[];this.callbacksToExecute=[];this.url=Kameleoon.Internals.runtime.DATA_URL;this.siteCode=Kameleoon.Internals.configuration.siteCode;Kameleoon.Utils.setInterval(this.processRequests.bind(this),500);Kameleoon.Utils.addEventListener(window,Kameleoon.Internals.runtime.beforeUnloadEvent,"Safari"===Kameleoon.Internals.runtime.Device.browser?()=>this.eventsToSend.length&&this.createErrorEventsQueue(this.obtainRequestBody(this.eventsToSend)):this.processRequests.bind(this))}addCallback(e){if(Kameleoon.Internals.runtime.Consent.hasGlobalConsent())e();else this.callbacksToExecute.push(e)}addRequest(e){this.eventsToSend.push(e);if("page"===e.eventType)this.processRequests()}createErrorEventsQueue(e){if(e)sessionStorage.setItem(this.errorKey,(sessionStorage.getItem(this.errorKey)||"")+e)}validateTrackingRequest(){const e=Kameleoon.Internals.runtime.ipIsTrackerAccepted;const t=Kameleoon.Internals.configuration.trackerExcludedIPRanges.length>0;if(t&&!e||!Kameleoon.Internals.runtime.Consent.hasGlobalConsent())return!1;else return!0}}class Segment{}class Tracking{constructor(){this.timeBeforeSendTracking=20*60*1e3;this.checkAndSetKameleoonTrackingTime=(t,e)=>{const n=Kameleoon.Utils.secureSessionStorage("getItem","kameleoonAnalyticsTrackingTimes");const i=null==n?{}:JSON.parse(n);const a="Experiment-"+t;if(null==i[e]||null==i[e][a]||(new Date).getTime()>=i[e][a]+this.timeBeforeSendTracking){if(null==i[e])i[e]={};i[e][a]=(new Date).getTime();Kameleoon.Utils.secureSessionStorage("setItem","kameleoonAnalyticsTrackingTimes",JSON.stringify(i));return!0}return!1};this.obtainTealiumData=()=>{};this.processCustomIntegration=t=>{const e=Kameleoon.Internals.configuration.customIntegrations;for(let n=0;n<t.customIntegrations.length;n++){const i=t.customIntegrations[n];const a=e.filter((t=>t.name==i))[0];if(a){const e="'"+t.name.replace(/(['"])/g,"\\$1")+"'";Kameleoon.Utils.runProtectedScript(`(function(\n\t\t\t\t\t\texperimentID,\n\t\t\t\t\t\texperimentName,\n\t\t\t\t\t\tpersonalizationID,\n\t\t\t\t\t\tpersonalizationName,\n\t\t\t\t\t\tvariationID,\n\t\t\t\t\t\tvariationName) {\n\t\t\t\t\t\t\t${a.jsCode}\n\t\t\t\t\t})(\n\t\t\t\t\t\t${t.experimentAction?t.id:null},\n\t\t\t\t\t\t${t.experimentAction?e:null},\n\t\t\t\t\t\t${!t.experimentAction?t.id:null},\n\t\t\t\t\t\t${!t.experimentAction?e:null},\n\t\t\t\t\t\t${"reference"==t.associatedVariation.id.toString()?0:t.associatedVariation.id},\n\t\t\t\t\t\t${"'"+t.associatedVariation.name+"'"}\n\t\t\t\t\t)`,"kameleoonCustomIntegration"+i+".js")}}}}}Tracking.prototype.processUniversalAnalytics=function(e){let n=Kameleoon.Tracking.findUniversalAnalyticsObject();let a=n&&n.answer&&42==n.answer;if(!a&&e.universalAnalyticsTracking.eventCallDelayed){let n=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(n);Kameleoon.Tracking.processUniversalAnalytics.apply(Kameleoon.Tracking,[e])}),150);return}let i=e.universalAnalyticsTracking.trackingId;if(a&&e.universalAnalyticsTracking.eventCallDelayed&&i)if(void 0==Kameleoon.Tracking.obtainUniversalAnalyticsTracker(e)){let n=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(n);Kameleoon.Tracking.processUniversalAnalytics.apply(Kameleoon.Tracking,[e])}),150);return}let l=Kameleoon.Tracking.obtainUniversalAnalyticsTrackerPrefix(e);if(null==n||n&&null==n.answer){let n=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(n);Kameleoon.Tracking.processUniversalAnalytics.apply(Kameleoon.Tracking,[e])}),150)}else{if(e.universalAnalyticsTracking.dimension&&e.universalAnalyticsTracking.dimension<201)n(l+"set","dimension"+e.universalAnalyticsTracking.dimension,e.name+"/"+e.associatedVariation.name.substring(0,80));if(Kameleoon.Tracking.checkAndSetKameleoonTrackingTime(e.id,"universalAnalytics"))if(e.universalAnalyticsTracking.pageViewTracking){let a=e.name.replace(/\//gi,"-");n(l+"send","pageview","/Kameleoon/"+a+"/"+encodeURIComponent(e.associatedVariation.name))}else if(a||e.universalAnalyticsTracking.eventTracking)n(l+"send","event","Kameleoon",e.name,e.associatedVariation.name,void 0,{nonInteraction:1})}};Tracking.prototype.findUniversalAnalyticsObject=()=>window.ga;Tracking.prototype.obtainUniversalAnalyticsTrackerPrefix=e=>{let n=Kameleoon.Tracking.obtainUniversalAnalyticsTracker(e);return n?n.get("name")+".":""};Tracking.prototype.obtainUniversalAnalyticsTrackerFromTrackingId=e=>{let n=Kameleoon.Tracking.findUniversalAnalyticsObject();if(void 0!==n&&null!=n.getAll){let a=n.getAll();if(e){for(let n=0;n<a.length;++n)if(e==a[n].get("trackingId"))return a[n]}else if(a.length>0)return a[0]}return};Tracking.prototype.obtainUniversalAnalyticsTracker=e=>{let n;if(e&&e.universalAnalyticsTracking&&e.universalAnalyticsTracking.trackingId)n=e.universalAnalyticsTracking.trackingId;return Kameleoon.Tracking.obtainUniversalAnalyticsTrackerFromTrackingId(n)};Tracking.prototype.processHeap=function(e){const a=window.heap;if(a){if(Kameleoon.Tracking.checkAndSetKameleoonTrackingTime(e.id,"Heap")){a.track("Kameleoon",{name:e.name,variationName:e.associatedVariation.name});a.addUserProperties({["experimentName-"+e.id]:e.name,["variationName-"+e.associatedVariation.id]:e.associatedVariation.name})}}else{const a=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearInterval(a);Kameleoon.Tracking.processHeap.apply(Kameleoon.Tracking,[e])}),150)}};Tracking.prototype.processAmplitude=function(e){const i=window.amplitude;if(i&&"function"==typeof window.amplitude.Identify){if(Kameleoon.Tracking.checkAndSetKameleoonTrackingTime(e.id,"Amplitude")){const n=new i.Identify;const o="KAM-"+e.id+"-"+e.name;n.set(o,e.associatedVariation.id+"-"+e.associatedVariation.name);i.identify(n)}}else{const i=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearInterval(i);Kameleoon.Tracking.processAmplitude.apply(Kameleoon.Tracking,[e])}),150)}};class Variation{constructor(e){this.getAction=()=>Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);for(let t in e)this[t]=e[t]}applyJavascriptCode(e){if(this.javaScriptCode&&this.javaScriptCode.code&&(null==this.javaScriptCode.evaluated||e)){this.javaScriptCode.evaluated=!0;return Kameleoon.Utils.runProtectedScript(this.javaScriptCode.code,"kameleoonVariationJavaScriptCode-"+this.id+".js")}return null}preProcessRedirect(e){}process(){const e=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);if(this.redirections&&!Kameleoon.Internals.runtime.editorEnabled)this.preProcessRedirect(e);if(this.forceNoFlicker&&!Kameleoon.Internals.runtime.domReady){var t="";for(var o=0,n=this.elementSets.length;o<n;++o)t+=(0!=o?", ":"")+this.elementSets[o].selector;Kameleoon.Utils.forceNoFlicker(t)}if(!this.styleSheetAdded){this.styleSheetAdded=!0;Kameleoon.Utils.addCSSStyleSheet(this.css,e,null)}if(this.javaScriptCode&&!this.permanentRefreshActive)if(!this.javaScriptCode.afterDOMReady)this.applyJavascriptCode(!1);else if(!this.permanentRefreshActive)Kameleoon.Utils.domReady((()=>{this.applyJavascriptCode(!1)}));if(this.forceNoFlicker&&!this.permanentRefreshActive)Kameleoon.Utils.removeBlockingStyleSheet();const r="enginePollerForVariation"+this.id;if(Kameleoon.Internals.runtime[r]&&!this.permanentRefreshActive){if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Utils.clearInterval(Kameleoon.Internals.runtime[r]);Kameleoon.Internals.runtime[r]=null}if(!Kameleoon.Internals.runtime[r]&&!Kameleoon.Internals.runtime.editorMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode){this.permanentRefreshActive=!0;Kameleoon.Internals.runtime.listenVariations.push(this);Kameleoon.Internals.runtime[r]=!0;if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Internals.runtime[r]=Kameleoon.Utils.setInterval((()=>{this.process()}),10)}}processReplaceData(e){}}class Visit{constructor(t){this.addActionTriggered=(t,e)=>{if(e){let e=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","experimentsTriggered",{});e[t.toString()]=!0;Kameleoon.Internals.runtime.storedData.saveField("Gatherer","experimentsTriggered",e)}else{let e=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","personalizationsTriggered",{});e[t.toString()]=!0;Kameleoon.Internals.runtime.storedData.saveField("Gatherer","personalizationsTriggered",e)}};this.addActivity=(t,e)=>{if(e)this.lastActivityDate=t};this.addAdBlocker=()=>{this.Device.adBlocker=!0};this.addConversions=(t,e,i,s)=>{let n=s?-1:1;e*=n;i*=n;let a=this.conversions[t];let o=a?a.count:0;let r=a?a.revenue:0;let l=o+e;let u=r+i;if(l>0)if(u>=0)this.conversions[t]={count:l,revenue:u};else delete this.conversions[t];else delete this.conversions[t]};this.addCustomData=(t,e,i)=>{if(Kameleoon.Utils.testEmptyMap(e)){if(i)delete this.customData[t]}else{if(i||null==this.customData[t])this.customData[t]={};for(let i in e)this.customData[t][i]=(this.customData[t][i]||0)+e[i]}};this.addExperiment=(t,e,i)=>{};this.addGeolocation=(t,e,i,s,n,a)=>{this.Geolocation={country:t,region:e,city:i,postalCode:s,latitude:n,longitude:a}};this.addNumberClicks=t=>{if(t>0)this.clicks+=t};this.addPage=(t,e,i,s)=>{this.addActivity(t,!0);let n=s.filter((t=>null!=t));this.pages.push({timestamp:t,keyPagesMatched:i,referrersMatched:n.length>0?n:[]});let a=this.pageURLsVisited[e];if(null==a){a=[];this.pageURLsVisited[e]=a}a.push(t);for(let t in this.productEansLastPage)this.productEansAllButLastPages[t]=!0;this.productEansLastPage={}};this.addPersonalization=(t,e,i)=>{};this.addProduct=t=>{this.productEansLastPage[t]=!0};this.addTargetingSegment=(t,e)=>{let i=this.activatedSegments[e];if(null==i){i=[];this.activatedSegments[e]=i}i.push(t)};this.addWeather=t=>{this.Weather=t};this.clearCustomDataPage=()=>{for(let t in Kameleoon.Internals.runtime.Gatherer.configuration.customData){let e=Kameleoon.Internals.runtime.Gatherer.configuration.customData[t];if("PAGE"==e.scope)delete this.customData[t]}};this.computeActionNumberActivations=(t,e,i,s)=>{if(null==s[t])return 0;return this.computeObjectNumberPresence(e,i,s[t].times)};this.computeObjectNumberPresence=(t,e,i)=>{let s=0;for(let n=0,a=i.length;n<a;++n){let a=i[n];if((null==t||a>=t)&&(null==e||a<=e))s++}return s};this.convertVisitFromServer=()=>this;this.isVisitFinished=()=>this.lastActivityDate<(new Date).getTime()-Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration;this.obtainKeyPageIsVisited=t=>{let e=this.pages.filter((e=>-1!=e.keyPagesMatched.indexOf(t)));return e.length>0};this.obtainMeanPageDuration=()=>{let t=new Date;let e=this.obtainTimesStartedPages();let i=OnlineMeanAndDeviation.createFromDifferences(e,!1,!0,!0);i.update([t.getTime()-e[e.length-1]]);return i.mean[0]};this.obtainNumberConversions=t=>{let e=this.conversions[t];return null==e?0:e.count};this.obtainPageNumberViews=(t,e,i,s)=>{let n=0;for(let a in this.pageURLsVisited)if(null!=a){let o=Kameleoon.Utils.computeRelativeURL(a);if((null==t||t.test(a)||t.test(o))&&(null==e||!e.test(a)&&!e.test(o)))n+=this.computeObjectNumberPresence(i,s,this.pageURLsVisited[a])}return n};this.obtainTimesStartedPages=()=>{let t=[];for(let e in this.pageURLsVisited)t.concat(this.pageURLsVisited[e]);return t.sort()};this.obtainPersonalizationNumberActivations=(t,e,i)=>this.computeActionNumberActivations(t,e,i,this.PersonalizationActivations);this.obtainReferrerIsPresent=t=>{let e=null==t?null:t+1;let i=this.pages.filter((t=>-1!=t.referrersMatched.indexOf(e)));return i.length>0};this.visitNumber=t.visitNumber||0;this.landingPageURL=t.landingPageURL||null;this.productEansAllButLastPages=t.productEansAllButLastPages||{};this.productEansLastPage=t.productEansLastPage||{};this.startDate=t.startDate||0;this.pageURLsVisited=t.pageURLsVisited||{};this.activatedSegments=t.activatedSegments||{};this.visitorCode=t.visitorCode||"";this.customData=t.customData||{};this.clicks=t.clicks||0;this.lastActivityDate=t.lastActivityDate||this.startDate;let e=t.Device||{};this.Device={adBlocker:e.adBlocker||!1,browser:e.browser||"Other",browserVersion:e.browserVersion||null,os:e.os||"Other",screenHeight:e.screenHeight||null,screenWidth:e.screenWidth||null,timeZone:e.timeZone||"UTC",type:e.type?e.type.toLocaleUpperCase():null,windowHeight:e.windowHeight||null,windowWidth:e.windowWidth||null};let i=t.Geolocation||{};this.Geolocation={city:i.city||null,country:i.country||null,latitude:i.latitude||null,longitude:i.longitude||null,postalCode:i.postalCode||null,region:i.region||null};let s=t.Weather||{};this.Weather={conditionCode:s.conditionCode||null,conditionDescription:s.conditionDescription||null,cloudiness:s.cloudiness||null,humidity:s.humidity||null,pressure:s.pressure||null,sunrise:s.sunrise||null,sunset:s.sunset||null,temperature:s.temperature||null,windSpeed:s.windSpeed||null};this.conversions=t.conversions||{};this.ExperimentActivations=t.ExperimentActivations||{};this.PersonalizationActivations=t.PersonalizationActivations||{};this.pages=t.pages||[]}obtainExperimentNumberActivations(t,e,i){return this.computeActionNumberActivations(t,e,i,this.ExperimentActivations)}}class Visitor{constructor(){this.addVisit=t=>{this.visits.push(t);this.currentVisit=t;this.totalVisits++;if(null==this.timeStartedEldestVisit)this.timeStartedEldestVisit=t.startDate;const e=this.visits.length;const i=Math.max(1,Kameleoon.Internals.configuration.maxNumberLocalVisits);if(e>i)this.visits=this.visits.slice(e-i)};this.addPreviousVisits=t=>{if(null!=this.currentVisit){const e=this.currentVisit;const i=[];for(let t=0,e=this.visits.length-1;t<e;++t)i.push(this.visits[t]);for(let e=0,s=t.length;e<s;++e)i.push(t[e]);i.sort(((t,e)=>t.startDate-e.startDate));this.visits=[];let s=null;let o=null;for(let t=0,e=i.length;t<e;t++){const e=i[t];const n=e.visitorCode;const r=e.startDate;if(n!=s||r!=o)this.addVisit(e);s=n;o=r}this.addVisit(e)}};this.obtainKeyPageIsVisited=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainKeyPageIsVisited(t))return!0;return!1};this.obtainReferrerIsPresent=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainReferrerIsPresent(t))return!0;return!1};this.obtainNumberConversions=t=>{let e=0;for(let i=this.visits.length-1;i>=0;--i)e+=this.visits[i].obtainNumberConversions(t);return e};this.obtainActionNumberActivations=(t,e,i,s,o,n,r,a)=>{const l=a?"obtainExperimentNumberActivations":"obtainPersonalizationNumberActivations";const m=Kameleoon.Internals.runtime.Visitor.visits.length;let c=0;if(m>0){if(o){const e=Kameleoon.Internals.runtime.Visitor.visits[m-1][l](t,i,s);c+=r?e>0?1:0:e}if(n)for(let e=0,o=m-1;e<o;++e){const o=this.visits[e][l](t,i,s);c+=r?o>0?1:0:o}}return c};this.obtainPageNumberViews=(t,e,i,s,o,n)=>{const r=this.visits.length;let a=0;if(r>0){if(o)a+=this.visits[r-1].obtainPageNumberViews(t,e,i,s);if(n)for(let o=0,n=r-1;o<n;++o)a+=this.visits[o].obtainPageNumberViews(t,e,i,s)}return a};this.obtainTimeSincePreviousVisit=()=>{let t=0;if(this.visits.length>1){t=this.currentVisit.startDate-this.visits.slice(-2)[0].lastActivityDate;t=Math.max(t,Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration)}return t};this.obtainVisitorCode=t=>{let e=!1;let i;let s=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE");const o=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","timeNextSynchronization",null);if(s)s=s.replace("_js_","");i=s;if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage){const t=Kameleoon.Internals.runtime.incomingStoredData?Kameleoon.Internals.runtime.incomingStoredData.kameleoonVisitorCode:Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(t)i=t}if(t||null==i){i=Kameleoon.Utils.obtainRandomString(Visitor.VISITOR_CODE_LENGTH,Analyst.CODE_ALPHABET);e=!0}Kameleoon.Utils.saveVisitorCode(i,null==o);this.visitorCode=i;return e};this.obtainVisitorFromStoredData=()=>Kameleoon.Internals.runtime.storedData.Visitor;this.saveToStoredData=()=>{this.saveFieldToStoredData("visits",this.visits);this.saveFieldToStoredData("totalVisits",this.totalVisits);this.saveFieldToStoredData("timeStartedEldestVisit",this.timeStartedEldestVisit)};this.setVisitorCode=t=>{if(this.visitorCode!=t){Kameleoon.Internals.runtime.newVisitorCode=!0;Kameleoon.Utils.saveVisitorCode(t);this.visitorCode=t;Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode=t;if(this.visits)this.visits.forEach((e=>{e.visitorCode=t}));Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList("experiments").forEach((t=>{if(void 0!==t.registeredVariationId){t.registeredVariationId=void 0;t.performVariationAssignment(!0)}}));this.saveToStoredData();Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData)}};this.updateCurrentVisit=()=>{};this.updateFromStoredData=(t,e,i)=>{let s=!1;const o=this.obtainVisitorFromStoredData();const n=o.visits;if(!this.visitorCode){const t=this.obtainVisitorCode(i);if(t)i=!0}if(n){const t=n.slice(-1)[0].visitorCode;if(t!=this.visitorCode){const e=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(e==t||!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){this.visitorCode=t;try{delete Kameleoon.Internals.runtime.localDataMap.COOKIE.kameleoonVisitorCode;delete Kameleoon.Internals.runtime.localDataMap.LS.kameleoonVisitorCode}catch(t){}}else if(e==this.visitorCode)i=!0}}if(i||t){e=!0;if(i)this.totalVisits=0}this.visits=[];if(!i&&n){n.forEach((t=>{this.addVisit(new Visit(t))}));this.totalVisits=o.totalVisits;this.timeStartedEldestVisit=o.timeStartedEldestVisit}let r=!1;if(e||!this.currentVisit||this.currentVisit.isVisitFinished()){const{Device:t,storedData:e}=Kameleoon.Internals.runtime;const o=e.obtainField("Gatherer","startsOfVisitForCurrentPage");e.saveField("Gatherer","startsOfVisitForCurrentPage",o+1);Kameleoon.Internals.runtime.Gatherer.startOfVisit=s=!0;e.resetForStartOfVisit();e.saveField("Runtime","firstReferrerHref",Kameleoon.Gatherer.Referrer.obtainCorrected(!0)||null);e.saveField("Runtime","firstReferrersIndices",Kameleoon.Gatherer.Referrer.obtainIndexes(!0)||[null]);e.saveField("Runtime","landingKeyPagesIndices",Kameleoon.Gatherer.KeyPage.obtainIndexes()||[null]);let n;if(!this.currentVisit||i)n=0;else n=this.currentVisit.visitNumber+1;this.addVisit(new Visit({visitorCode:this.visitorCode,startDate:(new Date).getTime(),visitNumber:n,landingPageURL:Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),Device:{browser:Kameleoon.Gatherer.Browser.obtain(),browserVersion:t.browserVersion,os:Kameleoon.Gatherer.OperatingSystem.obtain(),screenHeight:t.screenHeight,screenWidth:t.screenWidth,timeZone:Kameleoon.Gatherer.TimeZone.obtainId(),type:t.type,windowHeight:t.windowHeight,windowWidth:t.windowWidth}}));r=!0}this.saveToStoredData();Kameleoon.Internals.runtime.storedData.save(r)};this.trackInfluences=()=>{if(Kameleoon.Internals.runtime.Gatherer.startOfVisit&&this.visits.length>1)Kameleoon.Gatherer.track(VisitEvent_StaticData)};this.getCustomDataVisitor=()=>{const t={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in Kameleoon.Internals.runtime.Visitor.currentVisit.customData){const s=e[i];if(null!=s&&!s.disabled)if("VISITOR"==s.scope){const e=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[i];t[i]=e}}return t};this.registerVisitsRequestSuccessAndChangePreviousVisits=t=>{const e=[];for(let i=0,s=t.previousVisits.length;i<s;++i)e.push(new Visit(t.previousVisits[i]).convertVisitFromServer());if(e.length>0){this.addPreviousVisits(e);this.trackInfluences();this.saveToStoredData()}return e;};this.compareCurrentVisitFromServer=t=>{try{for(const e in t){if("Device"==e||"Geolocation"==e||"Weather"==e)continue;if(typeof this.currentVisit[e]==typeof t[e])this.currentVisit[e]=t[e];if("firstReferrerHref"==e||"landingKeyPagesIndices"==e||"firstReferrersIndices"==e)if(t[e])Kameleoon.Internals.runtime.storedData.saveField("Runtime",e,t[e])}}catch(t){}};this.performRemoteVisitorSynchronization=()=>{if(Kameleoon.Internals.runtime.enableRemoteVisitorSynchronization){const t=Kameleoon.Gatherer.Referrer.obtain()&&new URL(Kameleoon.Gatherer.Referrer.obtain()).origin;if(t!=window.location.origin){const t=t=>{if(t.previousVisits&&t.previousVisits.length)this.registerVisitsRequestSuccessAndChangePreviousVisits(t);if(t.currentVisit)this.compareCurrentVisitFromServer(t.currentVisit)};this.remoteSynchronisation("visitorCode",this.visitorCode,t,Kameleoon.Internals.configuration.enableHistoryReconciliation?0:Kameleoon.Internals.configuration.maxNumberLocalVisits)}}};this.obtainProductData=(t,e,i,s)=>{const o=`${Kameleoon.Internals.runtime.DATA_URL}/product/${t}`;i.siteCode=Kameleoon.Internals.configuration.siteCode;i.eans=encodeURIComponent(JSON.stringify((e instanceof Array?e:[e]).map((t=>t.toString()))));Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(o,Kameleoon.Utils.parseObjectToUrlParams(i),!1),(function(t){if(4===t.readyState&&200===t.status)s(JSON.parse(t.response||"{}"))}),(function(t){console.error(t)}));};this.visits=[];this.currentVisit=null;this.totalVisits=0;this.updateFromStoredData(!1);Object.defineProperty(this,"customData",{enumerable:!0,get:()=>this.getCustomDataVisitor()})}saveFieldToStoredData(t,e){Kameleoon.Internals.runtime.storedData.Visitor[t]=e}remoteSynchronisation(t,e,i,s){if("string"==typeof e&&e.length>0){const o=`${Kameleoon.Internals.runtime.DATA_URL}/visit/visitor`;const n={siteCode:Kameleoon.Internals.configuration.siteCode,currentVisit:"customData"!==t,format:"ENGINE",maxNumberPreviousVisits:"number"==typeof s?s:Kameleoon.Internals.configuration.maxNumberLocalVisits,version:2};"customData"==t&&(n.mappingValue=e);"visitorCode"==t&&(n.visitorCode=e);Kameleoon.Internals.runtime.RequestManager.addCallback((()=>{Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(o,Kameleoon.Utils.parseObjectToUrlParams(n),!1),(t=>{if(4==t.readyState&&200==t.status){const e=JSON.parse(t.responseText);i&&i(e);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"RemoteSynchronizationPerformed",{visitsFromServer:e})}}))}))}}}Visitor.VISITOR_CODE_LENGTH=16;Visitor.INFLUENCE_DELAY=1e3*60*60*24*7;try{window.Kameleoon=new KameleoonEngine}catch(o){console.log(o)}
Kameleoon.Internals = {"configuration":{"API_HOST_NAME":"api","APP_HOST_NAME":"app","BACK_OFFICE_HOST_NAME":"old","EDITOR_SRC":"src/main.ts","STATIC_IMAGES_URL":"//static.kameleoon.com/js/editor/source/images/","BASE_EDITOR_URL":"//static.kameleoon.com/js/editor/","NEW_EDITOR_URL":"//graphical-editor.kameleoon.com","EDITOR_HOST_NAME":"editor","DOMAIN":"kameleoon.com","WIDE_DOMAIN":"kameleoon.eu","GUI_ESTIMATED_LOADING_TIME":3000,"IMAGE_PATH":"https://pg7rvdvk4o.kameleoon.eu/images/","PROXY_HOST_NAME":"proxy","QOOXDOO_ESTIMATED_LOADING_TIME":2000,"SERVER_CALL_ESTIMATED_LOADING_TIME":500,"STATIC_DIRECT_HOST_NAME":"static-direct","STATIC_HOST_NAME":"static","VISITOR_DOMAIN":"kameleoon.io","environment":"PRODUCTION","staticURL":"//static.kameleoon.eu/","maxNumberLocalVisits":25,"memberCode":"0","siteCode":"pg7rvdvk4o","abtestConsent":"REQUIRED","abtestConsentOptout":"RUN","beforeAbtestConsent":"ALL","beforePersonalizationConsent":"ALL","personalizationConsent":"REQUIRED","personalizationConsentOptout":"RUN","personalizationsDeviation":0.9,"experiments":[],"personalizations":[],"targetingSegments":[],"variations":[{"id":0,"name":"Reference","css":"","elementSets":[]},{"id":null,"name":"Excluded"}],"goals":[{"id":191630,"name":"Retention rate","type":"ENGAGEMENT"},{"id":205080,"name":"[CONV] Order Conversions","type":"URL","url":"\\orders\\/.*confirm$"},{"id":205090,"name":"[CONV] Revenue","type":"CUSTOM"},{"id":205682,"name":"[CONV] UTY 008 - User completed the address step and progressed to pay","type":"CUSTOM"},{"id":205711,"name":"[CONV] UTY 008 User creates a validation error on the address section","type":"CUSTOM"},{"id":205716,"name":"[CONV] UTY 008 User creates a validation error on the payment section","type":"CUSTOM"},{"id":210638,"name":"UTY 012 - Tip Amount","type":"CUSTOM"},{"id":210640,"name":"UTY 012 - Enter CTA / Keydown[custom amount]","type":"CUSTOM"},{"id":210654,"name":"UTY 012 - Default Buttons","type":"CUSTOM"},{"id":210655,"name":"UTY 012 - Tip Added[Free / Paid ]","type":"CUSTOM"},{"id":212248,"name":"UTY 1.6 - See more","type":"CUSTOM"},{"id":212249,"name":"UTY 1.6 - See EULA","type":"CUSTOM"},{"id":214726,"name":"UTY 0.4 - Interaction with recommendations","type":"CLICK"},{"id":217649,"name":"Best match","type":"CLICK"},{"id":217650,"name":"Most popular","type":"CLICK"},{"id":217651,"name":"Best rated","type":"CLICK"},{"id":217652,"name":"Newest","type":"CLICK"},{"id":217653,"name":"Last updated","type":"CLICK"},{"id":217654,"name":"Lowest price","type":"CLICK"},{"id":217655,"name":"Highest price","type":"CLICK"},{"id":217697,"name":"Conversion of a popular product","type":"CUSTOM"},{"id":218041,"name":"[CONV] Interaction with the featured product","type":"CUSTOM"},{"id":218865,"name":"[CONV] Return to Cart","type":"CUSTOM"},{"id":220454,"name":"[CONV] Add to cart","type":"CUSTOM"},{"id":220458,"name":"[CONV] Paypal Select","type":"CUSTOM"},{"id":220459,"name":"[CONV] CreditCard Select","type":"CUSTOM"},{"id":221008,"name":"[CONV] UTY 1.12 - \"See Assets\" Clicks","type":"CUSTOM"},{"id":222273,"name":"[CONV]UTY0.7 Interaction with recommended products","type":"CUSTOM"},{"id":223332,"name":"UTY[1.15] Interaction Logos","type":"CUSTOM"},{"id":224163,"name":"[CONV] UTY 5.5 - Close popup","type":"CUSTOM"},{"id":224164,"name":"[CONV] UTY 5.5 - Clicks on suggested assets","type":"CUSTOM"},{"id":224852,"name":"UTY 0.8 - Clicks on Sale banner","type":"CUSTOM"},{"id":224868,"name":"UTY 0.8 - Clicks on Carousel","type":"CUSTOM"},{"id":224870,"name":"UTY 0.8 - Clicks on Daily Deal Banner","type":"CUSTOM"},{"id":224871,"name":"UTY 0.8 - Clicks on Shop the Sale Categories","type":"CUSTOM"},{"id":224872,"name":"UTY 0.8 - Clicks on Popular assets","type":"CUSTOM"},{"id":224873,"name":"UTY 0.8 - Clicks on Tools for Experts","type":"CUSTOM"},{"id":224874,"name":"UTY 0.8 - Clicks on Hot assets on Sale","type":"CUSTOM"},{"id":224875,"name":"UTY 0.8 - Clicks on Building a Low Poly Game","type":"CUSTOM"},{"id":224984,"name":"UTY 0.8 - Clicks on Your Favourites","type":"CUSTOM"},{"id":226252,"name":"Progression to checkout","type":"CLICK"},{"id":226253,"name":"Interaction with recommendations","type":"CLICK"},{"id":227485,"name":"PDP views","type":"URL","url":"(.*)/packages/(.*)"},{"id":228053,"name":"UTY[0.14] Click on Favorite Btn","type":"CLICK"},{"id":229298,"name":"UTY 0.16 - Toggle Dark Mode","type":"CUSTOM"},{"id":230385,"name":"UNY 5.6 - Bundle add to cart [5.6]","type":"CUSTOM"},{"id":230386,"name":"UNY 5.6 - Quicklook on bundle asset [5.6]","type":"CUSTOM"},{"id":230653,"name":"UTY 2.8 - Asset selected for comparison [2.8]","type":"CUSTOM"},{"id":230654,"name":"UTY 2.8 - View asset details [2.8]","type":"CUSTOM"},{"id":230655,"name":"UTY 2.8 - Comparison modal closed [2.8]","type":"CUSTOM"},{"id":230757,"name":"[CONV] Cart","type":"URL","url":"https://assetstore.unity.com/account/cart"},{"id":233646,"name":"[CONV] 0.20 Search returns zero results","type":"CUSTOM"},{"id":234427,"name":"[CONV] UTY 0.20 Search made","type":"CUSTOM"},{"id":237894,"name":"UTY [5.8] Asset toggle (Remove)","type":"CUSTOM"},{"id":237895,"name":"UTY [5.8]Asset toggle (Add)","type":"CUSTOM"},{"id":237931,"name":"UTY [5.8] Bundle add to cart","type":"CUSTOM"},{"id":240355,"name":"[CONV] Click on Compare Assets","type":"CLICK"},{"id":240356,"name":"[CONV]Clicks on Compare Assets- custom","type":"CUSTOM"},{"id":241429,"name":"UTY[1.32]Publisher asset clicked","type":"CUSTOM"},{"id":241430,"name":"UTY[1.32]Publisher asset favourited","type":"CUSTOM"},{"id":241431,"name":"UTY[1.32]Publisher asset quicklook","type":"CUSTOM"},{"id":241902,"name":"[CONV] Clicks on 'Load More' CTA","type":"CUSTOM"},{"id":241946,"name":"[CONV] UTY 2.16 - Tooltip closed","type":"CUSTOM"},{"id":244284,"name":"Starter pack added to cart [5.X]","type":"CUSTOM"},{"id":244285,"name":"Starter pack quicklook used","type":"CUSTOM"},{"id":267498,"name":"[CONV] Clicks on 'Compare' CTA","type":"CUSTOM"},{"id":269866,"name":"[CONV] User interacts with Rating filter","type":"CUSTOM"},{"id":272307,"name":"[CONV] User has an existing account [4.12]","type":"CUSTOM"},{"id":272308,"name":"[CONV] User is new/has incomplete data [4.12]","type":"CUSTOM"},{"id":272663,"name":"[CONV] User interacts with Pricing filter [1.48]","type":"CUSTOM"},{"id":273000,"name":"[CONV] User selects to view 24 assets","type":"CUSTOM"},{"id":273001,"name":"[CONV] User selects to view 48 assets","type":"CUSTOM"},{"id":273002,"name":"[CONV] User selects to view 72 assets","type":"CUSTOM"},{"id":273003,"name":"[CONV] User selects to view 96 assets","type":"CUSTOM"},{"id":273004,"name":"[CONV] User interacts with featured asset","type":"CUSTOM"},{"id":273005,"name":"[CONV] User clicks small grid CTA","type":"CUSTOM"},{"id":273006,"name":"[CONV] User clicks large grid CTA","type":"CUSTOM"},{"id":273938,"name":"[CONV] Interaction with recommended asset","type":"CUSTOM"},{"id":274038,"name":"[CONV] User clicks link to view package content","type":"CUSTOM"},{"id":275426,"name":"[CONV] User clicks on 'See assets used' [1.51]","type":"CUSTOM"},{"id":275427,"name":"[CONV] User adds promoted asset to cart [1.51]","type":"CUSTOM"},{"id":275821,"name":"[CONV] User clicks on user project CTA [1.54]","type":"CUSTOM"},{"id":277492,"name":"[CONV] [UTT 15.1] 2D and 3D category pages","type":"URL","url":"^(.*2d|.*3d)"},{"id":277616,"name":"[CONV] User clicks through on a homepage recommended asset [0.32]","type":"CUSTOM"},{"id":278184,"name":"[CONV] User opens the notifications list","type":"CUSTOM"},{"id":278186,"name":"[CONV] User clicks through on a notification","type":"CUSTOM"},{"id":278187,"name":"[CONV] User has an unread notification","type":"CUSTOM"},{"id":279545,"name":"[CONV] Asset quality tab opened [11.0]","type":"CUSTOM"},{"id":279547,"name":"[CONV] Asset guidelines link clicked [11.0]","type":"CUSTOM"},{"id":279548,"name":"[CONV] Tabs visible on PDP [11.0]","type":"CUSTOM"},{"id":280192,"name":"[CONV] [UTY 2.21] Buy Now CTA Click","type":"CUSTOM"},{"id":281257,"name":"[CONV] User adds favourited asset to cart in modal window [5.13]","type":"CUSTOM"},{"id":281316,"name":"[CONV] UTY 14.1 User clicks through the featured asset carousel","type":"CUSTOM"},{"id":281326,"name":"[CONV] UTY 14.1 See asset click","type":"CUSTOM"},{"id":282448,"name":"[CONV] Clicks on add to cart [9.0]","type":"CUSTOM"},{"id":282449,"name":"[CONV] Quicklook opened [9.0]","type":"CUSTOM"},{"id":282491,"name":"[CONV] UTY-15.3 User sees the new rating section","type":"CUSTOM"},{"id":282529,"name":"[CONV] UTY-15.3 User sees a 5* rated asset","type":"CUSTOM"},{"id":282532,"name":"[CONV] Add to basket on PDP click","type":"CUSTOM"},{"id":282533,"name":"[CONV] Buy now on PDP click","type":"CUSTOM"},{"id":282534,"name":"[CONV] UTY-15.3 User sees the 'Not enough ratings' message","type":"CUSTOM"},{"id":282927,"name":"[CONV] Random asset CTA click [3.4]","type":"CUSTOM"},{"id":282928,"name":"[CONV] Random asset add to cart [3.4]","type":"CUSTOM"},{"id":282987,"name":"[CONV] [UTY 3.6] User clicks through on promoted asset within account","type":"CUSTOM"},{"id":282994,"name":"[CONV] Random asset CTA refresh [3.4]","type":"CUSTOM"},{"id":283115,"name":"[CONV] [UTY 16.0] Quicklook opened","type":"CUSTOM"},{"id":284458,"name":"Interaction with carousel [UTY 3.10]","type":"CUSTOM"},{"id":284597,"name":"[CONV] [UTY-15.2] Top new assets clicked","type":"CUSTOM"},{"id":284601,"name":"[CONV] [UTY 15.2] Top paid assets clicked","type":"CUSTOM"},{"id":284602,"name":"[CONV] [UTY 15.2] Top free assets clicked","type":"CUSTOM"},{"id":284604,"name":"[CONV] [UTY 15.2] Top downloads clicked","type":"CUSTOM"},{"id":284605,"name":"[CONV] [UTY 15.2] See more assets","type":"CUSTOM"},{"id":284787,"name":"[CONV] User interacts with VAT toggle","type":"CUSTOM"},{"id":285013,"name":"[CONV] New asset like this clicked [3.8]","type":"CUSTOM"},{"id":285014,"name":"[CONV] New asset like this add to cart [3.8]","type":"CUSTOM"},{"id":285373,"name":"[CONV] User clicks on user project CTA [1.55]","type":"CUSTOM"},{"id":285374,"name":"[CONV] UGC Module visible","type":"CUSTOM"},{"id":285495,"name":"[CONV] [UTY-3.11] New featured asset seen","type":"CUSTOM"},{"id":285496,"name":"[CONV] [UTY 3.11] Featured asset clicked through","type":"CUSTOM"},{"id":285606,"name":"[CONV] [UTY 14.4] Render Pipeline compatability section seen","type":"CUSTOM"},{"id":285748,"name":"[CONV][UTY 0.33] User clicks on recommended asset","type":"CUSTOM"},{"id":285816,"name":"[CONV][UTY 0.33] User purchases recommended asset","type":"CUSTOM"},{"id":285875,"name":"[CONV][UTY 0.33] Clicks on Add to Cart for recommended assets","type":"CUSTOM"},{"id":286795,"name":"[CONV][UTY 0.35] Clicks on Add to Cart for recommended assets","type":"CUSTOM"},{"id":286797,"name":"[CONV][UTY 0.35] User clicks on recommended asset","type":"CUSTOM"},{"id":286968,"name":"[CONV][UTY 0.33] User sees deprecated asset","type":"CUSTOM"},{"id":287122,"name":"[CONV] [UTY 12.0] Less than 24 hours remaining","type":"CUSTOM"},{"id":287259,"name":"[CONV][UTY 3.13] Recently viewed visible (PLP)","type":"CUSTOM"},{"id":287260,"name":"[CONV][UTY 3.13] Recently viewed visible (PDP)","type":"CUSTOM"},{"id":287261,"name":"[CONV] [UTY 3.13] Recently viewed clicks (PLP)","type":"CUSTOM"},{"id":287262,"name":"[CONV] [UTY 3.13] Recently viewed clicks (PDP)","type":"CUSTOM"},{"id":287263,"name":"[CONV] [UTY 3.13] Recently viewed add to cart (PLP)","type":"CUSTOM"},{"id":287264,"name":"[CONV] [UTY 3.13] Recently viewed add to cart (PDP)","type":"CUSTOM"},{"id":287265,"name":"[CONV] [UTY 3.13] Recently viewed filled","type":"CUSTOM"},{"id":288177,"name":"[CONV] [UTY 3.14] Unseen assets tile clicked","type":"CUSTOM"},{"id":288178,"name":"[CONV] New release discount tile clicks","type":"CUSTOM"},{"id":289354,"name":"[CONV] User clicks on 'Recently viewed' asset in mini cart [13.1]","type":"CUSTOM"},{"id":289727,"name":"[CONV] Random asset PLP","type":"CUSTOM"},{"id":289747,"name":"[CONV] [UTY 19.0] Budget categories visible","type":"CUSTOM"},{"id":289756,"name":"[CONV] [19.0] User clicks on a [ 0 - $10 ] budget category","type":"CLICK"},{"id":289758,"name":"[CONV] [19.0] User clicks on a [ $10 - $25] budget category","type":"CLICK"},{"id":289759,"name":"[CONV] [19.0] User clicks on a [ $25 - $50] budget category","type":"CLICK"},{"id":289761,"name":"[CONV] [19.0] User clicks on a [ $50 - $100] budget category","type":"CLICK"},{"id":289762,"name":"[CONV] [19.0] User clicks on a [ $100 - $200] budget category","type":"CLICK"},{"id":289763,"name":"[CONV] [19.0] User clicks on a [  $200 + ] budget category","type":"CLICK"},{"id":289978,"name":"[CONV] [UTY 3.15] View more clicked","type":"CUSTOM"},{"id":289979,"name":"[CONV] [UTY 3.15] User clicks through paid asset","type":"CUSTOM"},{"id":289980,"name":"[CONV] [UTY 3.15] User sees paid asset upsell modal","type":"CUSTOM"},{"id":289981,"name":"[CONV] Free asset downloaded","type":"CUSTOM"},{"id":289998,"name":"[CONV] [UTY 3.15] User purchases paid asset upsell","type":"CUSTOM"},{"id":290003,"name":"[CONV] [UTY 3.15] Clicks on Add to cart","type":"CUSTOM"},{"id":290209,"name":"[CONV][3.16] User opens the favourites window","type":"CUSTOM"},{"id":290210,"name":"[CONV][3.16] On sale filter applied to favourites","type":"CUSTOM"},{"id":290212,"name":"[CONV][3.16] Favourited asset added to cart","type":"CUSTOM"},{"id":290213,"name":"[CONV][3.16] Favourited asset clicked through","type":"CUSTOM"},{"id":290538,"name":"[CONV][11.4] User views a 'Unity recommends' PDP","type":"CUSTOM"},{"id":292055,"name":"[CONV][14.5] User clicks the Flash deal info icon","type":"CUSTOM"},{"id":292100,"name":"[CONV][12.3] Tooltip modal closed","type":"CUSTOM"},{"id":292104,"name":"[CONV][12.3] User sees 24 hour notification","type":"CUSTOM"},{"id":292107,"name":"[CONV][12.3] User sees 12 hour notification","type":"CUSTOM"},{"id":292108,"name":"[CONV][12.3] User see 1 hour notification","type":"CUSTOM"},{"id":292706,"name":"[CONV][0.37] Shop sale click","type":"CLICK"},{"id":292709,"name":"[CONV][0.37] Shop Flash deals click","type":"CLICK"},{"id":292794,"name":"[CONV][0.36] Hero asset click","type":"CUSTOM"},{"id":292795,"name":"[CONV] Shop sale click","type":"CUSTOM"},{"id":292796,"name":"[CONV][0.36] Shop Flash deals click","type":"CUSTOM"},{"id":293494,"name":"[CONV] Quicklinks click through [8.2]","type":"CUSTOM"},{"id":293495,"name":"[CONV] Breadcrumb clicked [8.2]","type":"CUSTOM"},{"id":293648,"name":"[CONV] [UTY 3.18] New browse CTA clicked","type":"CUSTOM"},{"id":293650,"name":"[CONV] [UTY 3.18] Open in unity CTA clicked","type":"CUSTOM"},{"id":293651,"name":"[CONV] [UTY 3.18] Go to My Assets clicked","type":"CUSTOM"},{"id":293652,"name":"[CONV] [UTY 3.18] 'Added to my assets' closed","type":"CUSTOM"},{"id":294754,"name":"[CONV][UTY 0.38/0.39] Asset click through (0 search + account)","type":"CUSTOM"},{"id":294755,"name":"[CONV][UTY 0.38/0.39] Asset add to cart (0 search + account)","type":"CUSTOM"},{"id":295114,"name":"[CONV] Asset quality tab opened","type":"CUSTOM"},{"id":295918,"name":"[CONV] User clicks dark mode toggle [13.2]","type":"CUSTOM"},{"id":296037,"name":"[CONV] UTY 3.22 Favorite item click","type":"CUSTOM"},{"id":297735,"name":"[CONV][3.21] Notifications click","type":"CUSTOM"},{"id":297738,"name":"[CONV][3.21] Notification clicked","type":"CUSTOM"},{"id":297739,"name":"[CONV][3.21] Asset store sale notification - Control","type":"CUSTOM"},{"id":298566,"name":"[CONV] [18.3] Exit intent modal","type":"CUSTOM"},{"id":298567,"name":"[CONV] [18.3] Exit intent CTA clicked","type":"CUSTOM"},{"id":300173,"name":"[CONV][3.19] Clicks on suggested search","type":"CUSTOM"},{"id":301292,"name":"[CONV] Frequently bought together asset added in minicart","type":"CUSTOM"},{"id":303028,"name":"[CONV][3.23] Clicks on category tags","type":"CUSTOM"},{"id":303806,"name":"[CONV][20.0] Clicks on 3D category","type":"CLICK"},{"id":303807,"name":"[CONV][20.0] Clicks on 2D category","type":"CLICK"},{"id":303808,"name":"[CONV][20.0] Clicks on Tools category","type":"CLICK"},{"id":303811,"name":"[CONV][20.0] Clicks on Audio category","type":"CLICK"},{"id":303813,"name":"[CONV][20.0] Clicks on VFX category","type":"CLICK"},{"id":303814,"name":"[CONV][20.0] Clicks on Templates category","type":"CLICK"},{"id":303815,"name":"[CONV][20.0] Clicks on Add-ons category","type":"CLICK"},{"id":303817,"name":"[CONV][20.0] Clicks on Essentials category","type":"CLICK"},{"id":303818,"name":"[CONV][20.0] Clicks on Decentralization category","type":"CLICK"},{"id":303820,"name":"[CONV][20.0] Clicks on Sale category","type":"CLICK"},{"id":304489,"name":"[CONV][9.3] Sale menu opened","type":"CUSTOM"},{"id":304502,"name":"[CONV][9.3] Sale 3D link clicked","type":"CUSTOM"},{"id":304503,"name":"[CONV][9.3] Sale 2D link clicked","type":"CUSTOM"},{"id":304504,"name":" [CONV][9.3] Sale All assets on sale link clicked","type":"CUSTOM"},{"id":304505,"name":" [CONV][9.3] Sale Quick Start Asset Pack link clicked","type":"CUSTOM"},{"id":304508,"name":" [CONV][9.3] Sale Publisher of the week link clicked","type":"CUSTOM"},{"id":304509,"name":" [CONV][9.3] Sale New release discounts link clicked","type":"CUSTOM"},{"id":304521,"name":" [CONV][9.3] Sale $0 - $10 link clicked","type":"CUSTOM"},{"id":304522,"name":" [CONV][9.3] Sale $10 - $25 link clicked","type":"CUSTOM"},{"id":304523,"name":" [CONV][9.3] Sale $25 - $50 link clicked","type":"CUSTOM"},{"id":304524,"name":" [CONV][9.3] Sale $50 - $100 link clicked","type":"CUSTOM"},{"id":304526,"name":"[CONV][9.3] Sale $100+ link clicked","type":"CUSTOM"},{"id":304915,"name":"License Transactions","type":"CUSTOM"},{"id":304946,"name":"Views Pro PDP","type":"URL","url":"(.*)/products/unity-pro(.*)"},{"id":304947,"name":"5+ Min Session Duration","type":"TIME_SPENT","minTimeSpent":500001},{"id":304948,"name":"3+ Page Views","type":"PAGE_VIEWS","minPageViews":4},{"id":305648,"name":"[CONV][9.3] Sale Tools link clicked","type":"CUSTOM"},{"id":305649,"name":"[CONV][9.3] Sale VFX link clicked","type":"CUSTOM"},{"id":305650,"name":"[CONV][9.3] Sale Audio link clicked","type":"CUSTOM"},{"id":305652,"name":"[CONV][9.3] Sale Templates link clicked","type":"CUSTOM"},{"id":305656,"name":"[CONV][9.3] Sale Spring Sale - Flash Deals clicked","type":"CUSTOM"},{"id":305659,"name":"[CONV][9.3] Sale Spring Sale - 50% off clicked","type":"CUSTOM"},{"id":305809,"name":"[CONV] [18.4] Exit intent CTA clicked","type":"CUSTOM"},{"id":305810,"name":"[CONV] [18.4] Exit intent modal","type":"CUSTOM"},{"id":305821,"name":"[UNY] Pro purchase","type":"CUSTOM"},{"id":305823,"name":"[UNY] Plus purchase","type":"CUSTOM"},{"id":305824,"name":"[UNY] Personal download","type":"CUSTOM"},{"id":305826,"name":"[UNY] Pro Trial CTA","type":"CUSTOM"},{"id":305827,"name":"[UNY] Pro purchase CTA","type":"CUSTOM"},{"id":305828,"name":"[UNY] Hero visibility","type":"CUSTOM"},{"id":305829,"name":"[CONV] Hero CTA click","type":"CUSTOM"},{"id":305830,"name":"[UNY] Courses anchor","type":"CUSTOM"},{"id":305831,"name":"[UNY] Courses visible","type":"CUSTOM"},{"id":305834,"name":"Amplitude - page_view","type":"CUSTOM"},{"id":305836,"name":"Amplitude - video_play","type":"CUSTOM"},{"id":305841,"name":"Amplitude - file_download","type":"CUSTOM"},{"id":305844,"name":"Amplitude - navigation_click","type":"CUSTOM"},{"id":305936,"name":"[UNY] Develop user interfaces click through","type":"CUSTOM"},{"id":305938,"name":"[UNY] DOTS concepts click through","type":"CUSTOM"},{"id":305939,"name":"[UNY] Develop mobile AR click through","type":"CUSTOM"},{"id":305940,"name":"[UNY] Addressable concepts click through","type":"CUSTOM"},{"id":305941,"name":"[UNY] Shader graph click through","type":"CUSTOM"},{"id":305942,"name":"[UNY] Develop 3D click through","type":"CUSTOM"},{"id":306550,"name":"[UNY] [14.4] Hero CTA clicks","type":"CLICK"},{"id":306552,"name":"[UNY] [14.4] Anchor link clicks","type":"CLICK"},{"id":306595,"name":"[UNY] [14.4] 1st module visible","type":"CUSTOM"},{"id":306596,"name":"[UNY] [14.4] 2nd module visible","type":"CUSTOM"},{"id":306597,"name":"[UNY] [14.4] 3rd module visible","type":"CUSTOM"},{"id":306598,"name":"[UNY] [14.4] FAQ visible","type":"CUSTOM"},{"id":306838,"name":"[UNY][22.1] Personal download","type":"CUSTOM"},{"id":306847,"name":"[UNY][22.1] Create with Unity passed","type":"CUSTOM"},{"id":306850,"name":"[UNY][22.1] Start learning click","type":"CUSTOM"},{"id":306852,"name":"[UNY][22.1] No thanks click","type":"CUSTOM"},{"id":307055,"name":"test support kam","type":"CUSTOM"},{"id":307056,"name":"[UNY][9.12] Pro Trial CTA ","type":"CUSTOM"},{"id":307106,"name":"[UNY][9.12] Pro purchase CTA","type":"CUSTOM"},{"id":307112,"name":"[UNY][22.0] Clicks on the courses anchor link","type":"CUSTOM"},{"id":307113,"name":"[UNY][22.0] Clicks on any of the courses","type":"CUSTOM"},{"id":307114,"name":"[UNY][22.0] Clicks on the ‘See all courses’ CTA","type":"CUSTOM"},{"id":307115,"name":"[UNY][22.0] Visibility of the courses section","type":"CUSTOM"},{"id":307117,"name":"[UNY][1.21] Primary Hero CTA click","type":"CUSTOM"},{"id":307118,"name":"[UNY][1.21] Trial click","type":"CUSTOM"},{"id":307119,"name":"[UNY][1.21] Social proof visible","type":"CUSTOM"},{"id":307120,"name":"[UNY][10.14] See other plans click","type":"CUSTOM"},{"id":307121,"name":"[UNY][10.14] Compare plans section visible","type":"CUSTOM"},{"id":307122,"name":"[UNY][10.14] Download CTA click","type":"CUSTOM"},{"id":307123,"name":"[UNY][10.14] Compare plans CTA click ","type":"CUSTOM"},{"id":307125,"name":"[UNY][10.14] Pro try for free click","type":"CUSTOM"},{"id":307126,"name":"[UNY][10.14] Plus choose plan click","type":"CUSTOM"},{"id":307127,"name":"[UNY][10.14] Enterprise Contact us click","type":"CUSTOM"},{"id":307767,"name":"Amplitude - scroll_depth","type":"CUSTOM"},{"id":308300,"name":"[UNY][23.0] Pro config CTA click","type":"CUSTOM"},{"id":308301,"name":"[UNY][23.0] Plus config CTA click","type":"CUSTOM"},{"id":308302,"name":"[UNY][23.0] Download CTA click","type":"CUSTOM"},{"id":308303,"name":"[UNY][23.0] Student primary CTA click","type":"CUSTOM"},{"id":308304,"name":"[UNY][23.0] Pro trial CTA click","type":"CUSTOM"},{"id":308305,"name":"[UNY][23.0] Enterprise primary CTA click","type":"CUSTOM"},{"id":308306,"name":"[UNY][23.0] Industry primary CTA click","type":"CUSTOM"},{"id":308307,"name":"[UNY][23.0] Side nav link clicked","type":"CUSTOM"},{"id":308308,"name":"[UNY][23.0] Pro learn more CTA click","type":"CUSTOM"},{"id":308309,"name":"[UNY][23.0] Plus learn more CTA click","type":"CUSTOM"},{"id":308310,"name":"[UNY][23.0] Personal learn more CTA click","type":"CUSTOM"},{"id":308311,"name":"[UNY][23.0] Plus learn more CTA click","type":"CUSTOM"},{"id":308312,"name":"[UNY][23.0] Student learn more CTA click","type":"CUSTOM"},{"id":308342,"name":"[UNY][23.0] Unity Personal visible","type":"CUSTOM"},{"id":308343,"name":"[UNY][23.0] Unity Student visible","type":"CUSTOM"},{"id":308344,"name":"[UNY][23.0] Unity Plus visible","type":"CUSTOM"},{"id":308345,"name":"[UNY][23.0] Unity Pro visible","type":"CUSTOM"},{"id":308346,"name":"[UNY][23.0] Unity Enterprise visible","type":"CUSTOM"},{"id":308347,"name":"[UNY][23.0] Unity Industry visible","type":"CUSTOM"},{"id":308730,"name":"[UNY] [0.52] Create your game click through","type":"CUSTOM"},{"id":308731,"name":"[UNY] [0.52] Operate your game click through","type":"CUSTOM"},{"id":308732,"name":"[UNY] [0.52] Get support CTA","type":"CUSTOM"},{"id":308733,"name":"[UNY] [0.52] Monetize your game CTA","type":"CUSTOM"},{"id":308992,"name":"[UTY][22.1] Email banner click through","type":"CUSTOM"},{"id":308993,"name":"[UTY][22.1] Quick start banner click through","type":"CUSTOM"},{"id":308994,"name":"[UTY][22.1] Hero banner click through","type":"CUSTOM"},{"id":308995,"name":"[UTY][22.1] Popular assets clickthrough","type":"CUSTOM"},{"id":308996,"name":"[UTY][22.1] Popular assets 1 click","type":"CUSTOM"},{"id":308997,"name":"[UTY][22.1] Popular assets 2 click","type":"CUSTOM"},{"id":308998,"name":"[UTY][22.1] Popular assets 3 click","type":"CUSTOM"},{"id":308999,"name":"[UTY][22.1] Popular assets 4 click","type":"CUSTOM"},{"id":309000,"name":"[UTY][22.1] Popular assets 5 click","type":"CUSTOM"},{"id":309001,"name":"[UTY][22.1] Tools Selector click","type":"CUSTOM"},{"id":309002,"name":"[UTY][22.1] 3D Selector click","type":"CUSTOM"},{"id":309003,"name":"[UTY][22.1] 2D Selector click","type":"CUSTOM"},{"id":309004,"name":"[UTY][22.1] Sale Selector click","type":"CUSTOM"},{"id":309005,"name":"[UTY][22.1] Free Selector click","type":"CUSTOM"},{"id":309006,"name":"[UTY][22.1] New developers Selector click","type":"CUSTOM"},{"id":309012,"name":"[UTY][22.1] Add to cart","type":"CUSTOM"},{"id":309032,"name":"[UTY][22.1] Top new assets clicked","type":"CUSTOM"},{"id":309033,"name":"[UTY][22.1] Top paid assets clicked","type":"CUSTOM"},{"id":309034,"name":"[UTY][22.1] Top free assets clicked","type":"CUSTOM"},{"id":309035,"name":"[UTY][22.1] VFX Selector click","type":"CUSTOM"},{"id":309036,"name":"[UTY][22.1] Templates Selector click","type":"CUSTOM"},{"id":309037,"name":"[UTY][22.1] Add-Ons Selector click","type":"CUSTOM"},{"id":309038,"name":"[UTY][22.1] Essentials Selector click","type":"CUSTOM"},{"id":309039,"name":"[UTY][22.1] Decentralization Selector click","type":"CUSTOM"},{"id":309041,"name":"[UTY][22.1] Audio Selector click","type":"CUSTOM"},{"id":309443,"name":"[UTY][3.25] PLP base visibility","type":"CUSTOM"},{"id":309445,"name":"[UTY][3.25] 3D click through","type":"CUSTOM"},{"id":309446,"name":"[UTY][3.25] 2D click through","type":"CUSTOM"},{"id":309447,"name":"[UTY][3.25] Tools click through","type":"CUSTOM"},{"id":309448,"name":"[UTY][3.25] New click through","type":"CUSTOM"},{"id":309449,"name":"[UTY][3.25] Best Sellers click through","type":"CUSTOM"},{"id":309492,"name":"[UTY][3.25] Sale click through","type":"CUSTOM"},{"id":309529,"name":"[UTY][8.3] Search made","type":"CUSTOM"},{"id":309530,"name":"[UTY][8.3] Results filitered","type":"CUSTOM"},{"id":309531,"name":"[UTY][8.3] 2D selected","type":"CUSTOM"},{"id":309533,"name":"[UTY][8.3] Animations selected","type":"CUSTOM"},{"id":309534,"name":"[UTY][8.3] Characters selected","type":"CUSTOM"},{"id":309535,"name":"[UTY][8.3] Environments selected","type":"CUSTOM"},{"id":309536,"name":"[UTY][8.3] Tools selected","type":"CUSTOM"},{"id":309537,"name":"[UTY][8.3] Add-ons selected","type":"CUSTOM"},{"id":309538,"name":"[UTY][8.3] Audio selected","type":"CUSTOM"},{"id":309539,"name":"[UTY][8.3] Essentials selected","type":"CUSTOM"},{"id":309540,"name":"[UTY][8.3] Templates selected","type":"CUSTOM"},{"id":309541,"name":"[UTY][8.3] VFX selected","type":"CUSTOM"},{"id":309542,"name":"[UTY][8.3] 3D selected","type":"CUSTOM"},{"id":309580,"name":"[UNY][3.24] Plus config page visit","type":"URL","url":"https\\://store\\.unity\\.com/configure-plan/unity-plus(.*)"},{"id":309581,"name":"[UNY][3.24] Pro config page visit","type":"URL","url":"^https\\://store\\.unity\\.com/configure-plan/unity-pro$"},{"id":309582,"name":"[UNY][3.24] Pro trial config visit","type":"URL","url":"https\\://store\\.unity\\.com/configure-plan/unity-pro-trial(.*)"},{"id":309583,"name":"[UNY][3.24] Personal PDP visit","type":"URL","url":"https\\://store\\.unity\\.com/download(.*)"},{"id":309584,"name":"[UNY][3.24] Enterprise form visit","type":"URL","url":"https\\://create\\.unity\\.com/contact-unity-expert(.*)"},{"id":309623,"name":"[UTY][14.7] Quicklook opened","type":"CUSTOM"},{"id":309624,"name":"[UTY][14.7] Quicklook add to cart","type":"CUSTOM"},{"id":309625,"name":"[UTY][14.7] Quicklook view details","type":"CUSTOM"},{"id":309626,"name":"[UTY][14.7] Quicklook Product info","type":"CUSTOM"},{"id":309627,"name":"[UTY][14.7] Quicklook refund policy","type":"CUSTOM"},{"id":309628,"name":"[UTY][14.7] Quicklook read more","type":"CUSTOM"},{"id":309629,"name":"[UTY][14.7] Quicklook reviews","type":"CUSTOM"},{"id":309708,"name":"[UTY][14.3] Download Unity click","type":"CUSTOM"},{"id":309709,"name":"[UTY][14.3] Explore plans and pricing click","type":"CUSTOM"},{"id":309710,"name":"[UTY][14.3] Feature card visibility","type":"CUSTOM"},{"id":309711,"name":"[UTY][14.3] Download Unity Editor click","type":"CUSTOM"},{"id":309712,"name":"[UTY][14.3] View all editor plans click","type":"CUSTOM"},{"id":309714,"name":"[UTY][14.3] Discover case studies click","type":"CUSTOM"},{"id":309715,"name":"[UTY][14.3] Student and hobbyist plan visibility","type":"CUSTOM"},{"id":309716,"name":"[UTY][14.3]Unity Personal click through","type":"CUSTOM"},{"id":309717,"name":"[UTY][14.3] Unity Student click through","type":"CUSTOM"},{"id":309718,"name":"[UTY][14.3] Unity Plus click through","type":"CUSTOM"},{"id":309719,"name":"[UTY][14.3] Unity Pro click through","type":"CUSTOM"},{"id":309720,"name":"[UTY][14.3] Unity Enterprise click through","type":"CUSTOM"},{"id":309721,"name":"[UTY][14.3] Unity Industry click through","type":"CUSTOM"},{"id":309722,"name":"[UTY][14.3] Unity Learn click","type":"CUSTOM"},{"id":309723,"name":"[UTY][14.3] Unity products click","type":"CUSTOM"},{"id":309724,"name":"[UTY][14.3] Professional plans visibility","type":"CUSTOM"},{"id":310169,"name":"[UTY][8.4] On sale selected","type":"CUSTOM"},{"id":310170,"name":"[UTY][8.4] New release discount selected","type":"CUSTOM"},{"id":310172,"name":"[UTY][8.4] Hide Purchased Assets selected","type":"CUSTOM"},{"id":310173,"name":"[UTY][8.4] 3D selected","type":"CUSTOM"},{"id":310174,"name":"[UTY][8.4] 2D selected","type":"CUSTOM"},{"id":310175,"name":"[UTY][8.4] Add ons selected","type":"CUSTOM"},{"id":310176,"name":"[UTY][8.4] Audio selected","type":"CUSTOM"},{"id":310177,"name":"[UTY][8.4] Decentralization selected","type":"CUSTOM"},{"id":310178,"name":"[UTY][8.4] Essentials selected","type":"CUSTOM"},{"id":310179,"name":"[UTY][8.4] Templates selected","type":"CUSTOM"},{"id":310180,"name":"[UTY][8.4] Tools selected","type":"CUSTOM"},{"id":310181,"name":"[UTY][8.4] VFX selected","type":"CUSTOM"},{"id":310271,"name":"[UTY][8.4] Filters interaction","type":"CUSTOM"},{"id":310596,"name":"[UNY] [0.54] 'Next' click","type":"CUSTOM"},{"id":310600,"name":"[UNY] [0.54] 'Back' click","type":"CUSTOM"},{"id":310601,"name":"[UNY] [0.54] Let's talk click","type":"CUSTOM"},{"id":310602,"name":"[UNY] [0.54] \"First Name\" populated","type":"CUSTOM"},{"id":310606,"name":"[UNY] [0.54] \"Last Name\" populated","type":"CUSTOM"},{"id":310607,"name":"[UNY] [0.54] \"Email Address\" populated","type":"CUSTOM"},{"id":310609,"name":"[UNY] [0.54] \"School/University\" populated","type":"CUSTOM"},{"id":310614,"name":"[UNY] [0.54] \"Job Title\" populated","type":"CUSTOM"},{"id":310616,"name":"[UNY] [0.54] \"Industry\" populated","type":"CUSTOM"},{"id":310617,"name":"[UNY] [0.54] \"Country\" populated","type":"CUSTOM"},{"id":310618,"name":"[UNY] [0.54] \"Phone\" populated","type":"CUSTOM"},{"id":310619,"name":"[UNY] [0.54] \"Questions/Comments\" populated","type":"CUSTOM"},{"id":310742,"name":"[UNY] [0.54] \"Reason for reaching out\" populated","type":"CUSTOM"},{"id":310743,"name":"[UNY] [0.54] \"Timeline of Project\" populated","type":"CUSTOM"},{"id":310744,"name":"[UNY] [0.54] \"How many students would you like to support?\" populated","type":"CUSTOM"},{"id":310824,"name":"User Attribute Sent","type":"CUSTOM"},{"id":311239,"name":"[UNY 0.53] Pro 'Choose plan' CTA","type":"CUSTOM"},{"id":311240,"name":"[UNY 0.53] Games or entertainment","type":"CUSTOM"},{"id":311241,"name":"[UNY 0.53] Other industry","type":"CUSTOM"},{"id":311242,"name":"[UNY 0.53] Ok I understand","type":"CUSTOM"},{"id":311243,"name":"[UNY 0.53] Unity Industry link click","type":"CUSTOM"},{"id":311332,"name":"[UTY 3.27] {Subcategory} selected","type":"CUSTOM"},{"id":311333,"name":"[UTY 3.27] {Genre} Selected","type":"CUSTOM"},{"id":311970,"name":"[UTY] [15.8] Review hover PLP","type":"CUSTOM"},{"id":311971,"name":"[UTY] [15.8] Review hover PDP","type":"CUSTOM"},{"id":312778,"name":"[UTY] [8.5] Sale menu opened","type":"CUSTOM"},{"id":312779,"name":"[UTY] [8.5] Sale {Link} clicked","type":"CUSTOM"},{"id":312847,"name":"[KAM] A/A test tracking click","type":"CLICK"},{"id":313009,"name":"[UTY] [3.26] Recently viewed visible","type":"CUSTOM"},{"id":313010,"name":"[UTY] [3.26] Recently viewed click","type":"CUSTOM"},{"id":313774,"name":"[UTY][20.1] Clicks on copy button","type":"CUSTOM"},{"id":313842,"name":"[CONV] Pageview test","type":"CUSTOM"},{"id":313854,"name":"[CONV] Click test","type":"CUSTOM"},{"id":313855,"name":"[CONV] Click category tabs","type":"CUSTOM"},{"id":313947,"name":"[UTY] [15.9] Review hover PDP","type":"CUSTOM"},{"id":313948,"name":"[UTY] [15.9] Review hover PLP","type":"CUSTOM"},{"id":314566,"name":"Amplitude - form_submit","type":"CUSTOM"},{"id":314578,"name":"Amplitude - js_error","type":"CUSTOM"},{"id":318081,"name":"[UTY 20.4] More from this publisher click","type":"CUSTOM"},{"id":318082,"name":"[UTY 20.4] Category best sellers click","type":"CUSTOM"},{"id":318083,"name":"[UTY 20.4] Frequently bought together click","type":"CUSTOM"},{"id":318084,"name":" [UTY 20.4] More from this publisher asset click","type":"CUSTOM"},{"id":318085,"name":"[UTY 20.4] Category best sellers asset click","type":"CUSTOM"},{"id":318086,"name":" [UTY 20.4] Frequently bought together asset click","type":"CUSTOM"},{"id":318418,"name":"[CONV][0.54] Progression - step 1","type":"CUSTOM"},{"id":318419,"name":"[CONV][0.54] Progression - step 2","type":"CUSTOM"},{"id":318420,"name":"[CONV][0.54] Progression - step 3","type":"CUSTOM"},{"id":319098,"name":"[CONV] Review tab opened","type":"CUSTOM"},{"id":320114,"name":"[CONV] Clicks on Sale category","type":"CUSTOM"},{"id":320312,"name":"[CONV] User clicks on recently viewed assets carousel - 0 search","type":"CUSTOM"},{"id":320314,"name":"[CONV] User clicks on return CTA - 0 search","type":"CUSTOM"},{"id":322215,"name":"[CONV] User clicks on Asset store category selector on pricing ","type":"CUSTOM"}],"scriptProduceTime":1713775994132,"timeZone":"Greenwich","webExperimentationSetup":true,"boLocale":"ENGLISH","trackerContinent":"","DATA_URL":"https://data.kameleoon.io","useWideDomainSupport":true,"universalAnalyticsTrackerId":"UA-2854981-61","customIntegrations":[{"name":"Amplitude : custom","jsCode":"// Define the name of the current experiment or personalization\r\nconst currentName = experimentName ? experimentName : personalizationName;\r\n\r\n// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\nif(id!==-1){\r\n  const processAmplitude = function() {    const instance = window.amplitudeGTM._iq['allAmp'];\r\n    const identify = new amplitude.Identify();        \r\n    identify.append(\"kameleoon_variation_report\", currentName + \" - \" + variationName);\r\n    instance.identify(identify);\r\n    instance.flush();    \r\n    //Kameleoon.API.Goals.processConversion(310824)\r\n  };  \r\n  \r\n  Kameleoon.API.Core.runWhenConditionTrue(function() {\r\n    return typeof window.amplitude !== \"undefined\" && typeof window.amplitudeGTM !== \"undefined\" && window.amplitudeGTM._iq['allAmp'] !== undefined && typeof window.amplitude.Identify === \"function\";\r\n  }, processAmplitude, 150);\r\n}"}],"graphicalEditorVersion":"v1","globalScript":"Kameleoon.API.Core.runWhenConditionTrue((()=>window.OneTrust&&window.OneTrust.OnConsentChanged&&window.OnetrustActiveGroups),(()=>{Kameleoon.API.Visitor.personalizationLegalConsent||-1===window.OnetrustActiveGroups.indexOf(\"C0002\")||(console.log(\"[KAMELEOON ENABLE CONSENT] basic state\"),Kameleoon.API.Core.enableLegalConsent(\"BOTH\")),window.OneTrust.OnConsentChanged((({detail:i})=>{i&&(i.includes(\"C0002\")?(console.log(\"[KAMELEOON ENABLE CONSENT] consent changed\"),Kameleoon.API.Core.enableLegalConsent(\"BOTH\")):(console.log(\"[KAMELEOON DISABLE CONSENT] consent changed\"),Kameleoon.API.Core.disableLegalConsent(\"BOTH\")))})),window.kameleoonStartTimeGlobalScript=Date.now()}));try{var kameleoonEventsTracker=[{id:214726,selector:\".recommendations a\"},{id:217649,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:first-child\"},{id:217650,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(2)\"},{id:217651,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(3)\"},{id:217652,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(4)\"},{id:217653,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(5)\"},{id:217654,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(8)\"},{id:217655,selector:\"#main-layout-scroller > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(2) > div:first-child > div:nth-of-type(1) > div:first-child > div:first-child > div:first-child > div:nth-of-type(9)\"},{id:226252,selector:\"button.auto[label='Buy Now']\"},{id:226252,selector:\"button.auto[label='Checkout']\"},{id:226252,selector:\"button.auto[label='Proceed to Checkout']\"},{id:226253,selector:\".hottest-packages\"},{id:228053,selector:\".ifont-favorite-border\"},{id:240355,selector:\".uty-2-10-compBar-cta.active\"},{id:289756,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(1)\"},{id:289758,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(2)\"},{id:289759,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(3)\"},{id:289761,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(4)\"},{id:289762,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(5)\"},{id:289763,selector:\".cv-19-0-price-container .cv-19-0-price-item:nth-child(6)\"},{id:292706,selector:'#main-layout-scroller .desktop button[label=\"Shop 50% off\"]'},{id:292709,selector:'#main-layout-scroller .desktop button[label=\"Shop Flash Deals\"]'},{id:303806,selector:\".category-node-wrapper a[href$='/3d']\"},{id:303807,selector:\".category-node-wrapper a[href$='/2d']\"},{id:303808,selector:\".category-node-wrapper a[href$='/tools']\"},{id:303811,selector:\".category-node-wrapper a[href$='/audio']\"},{id:303813,selector:\".category-node-wrapper a[href$='/vfx']\"},{id:303814,selector:\".category-node-wrapper a[href$='/templates']\"},{id:303815,selector:\".category-node-wrapper a[href$='/add-ons']\"},{id:303817,selector:\".category-node-wrapper a[href*='/?category=essentials']\"},{id:303818,selector:\".category-node-wrapper a[href*='decentralization-hub']\"},{id:303820,selector:\".cv-20-0-sale--category--wrapper a[href$='/?on_sale=true&new_sale=true&orderBy=1']\"},{id:306550,selector:\".cv-14-4-component-hero__buttons .cv-14-4-btn, .component-hero__buttons .btn-blue\"},{id:306552,selector:\"#cv-14-4-component-onpage__menu a, #component-onpage__menu a\"},{id:312847,selector:\"#plans-and-pricing--2 #product-card-323875--2 .product-card__cta\"}],createEventTracking=function(i,e){for(var t,d=function(i){Kameleoon.Internals.runtime.touchMoveEvent||Kameleoon.API.Goals.processConversion(e.id)},r=0;r<i.length;++r)t=i[r],Kameleoon.Utils.addEventListener(t,Kameleoon.Internals.runtime.mouseDownEvent,d,!0)},kameleoonTimeoutId=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(kameleoonTimeoutId),kameleoonEventsTracker.forEach((i=>{Kameleoon.API.Core.runWhenElementPresent(i.selector,(e=>{createEventTracking(e,i)}),null,Kameleoon.Internals.runtime.singlePageSupport||Kameleoon.Internals.runtime.dynamicRefresh)}))}),250)}catch(i){console.log(\"An error occurred in your custom JavaScript Kameleoon tracking function, please check your code.\"),console.log(i,i.message)}","enableRemoteVisitorSynchronization":true,"enableRemoteVisitorSynchronizationItpOnly":true,"track":true,"trackerExcludedIPRanges":[],"useProduct":true,"Gatherer":"eyJtYXhWaXNpdElkbGVEdXJhdGlvbiI6MTgwMDAwMCwiZGlyZWN0Tm9uZVJlZmVycmVyT25seUZpcnN0IjpmYWxzZSwiYnJvd3NlcnMiOnsiMCI6eyJuYW1lIjoiQ0hST01FIn0sIjEiOnsibmFtZSI6IkVYUExPUkVSIn0sIjIiOnsibmFtZSI6IkZJUkVGT1gifSwiMyI6eyJuYW1lIjoiU0FGQVJJIn0sIjQiOnsibmFtZSI6Ik9QRVJBIn19LCJvc3MiOnsiMCI6eyJuYW1lIjoiV0lORE9XUyJ9LCIxIjp7Im5hbWUiOiJNQUMifSwiMiI6eyJuYW1lIjoiSU9TIn0sIjMiOnsibmFtZSI6IkxJTlVYIn0sIjQiOnsibmFtZSI6IkFORFJPSUQifSwiNSI6eyJuYW1lIjoiV0lORE9XUyBQSE9ORSJ9fSwibm9SZWZlcnJlclBhZ2VzIjpbXSwicmVmZXJyZXJzIjp7IjAiOnsibmFtZSI6Ikdvb2dsZSBBZFdvcmRzIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLmdvb2dsZShcXC5jb20/KT9cXC5bXi9cXC5dKy9hY2xrKFtcXD8mI10uKnwpJCJ9LHsibWV0aG9kIjoiVVJMX1JFR0VYIiwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6IltcXD8mI11nY2xpZD0ifV19LCIxIjp7Im5hbWUiOiJHb29nbGUgT3JnYW5pYyBTZWFyY2giLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3sibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJhbmQiOmZhbHNlLCJwYXJhbWV0ZXJzIjoiXi4rXFwuZ29vZ2xlKFxcLmNvbT8pP1xcLlteL1xcLl0rLyg/IWFjbGt8aW1ncmVzKS4qW1xcPyYjXXE9LiooW1xcPyYjXS4qfCkkIn0seyJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvPyQifV19LCIyIjp7Im5hbWUiOiJCaW5nIE9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLmJpbmdcXC5bXi9cXC5dKy8uKltcXD8mI11xPS4qKFtcXD8mI10uKnwpJCJ9XX0sIjMiOnsibmFtZSI6IllhaG9vIE9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLnlhaG9vXFwuW14vXFwuXSsvLipbXFw/JiNdcD0uKihbXFw/JiNdLip8KSQifV19LCI0Ijp7Im5hbWUiOiJCYWlkdSBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXC5iYWlkdVxcLlteL1xcLl0rLy4qW1xcPyYjXXdkPS4qKFtcXD8mI10uKnwpJCJ9XX19LCJrZXlQYWdlcyI6e30sImN1c3RvbURhdGEiOnsiMCI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiUHJvamVjdHMgcGVyIHByb2R1Y3QiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IkxJU1QifSwiMSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiU2VhcmNoIG1hZGUiLCJmb3JtYXQiOi0yLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIyIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJQcmljZSByYW5nZSBzZWxlY3RlZCBbVVRZIDEuNDhdIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJMSVNUIn0sIjMiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBNb2RhbCBzZWVuIFs1LjEzXSIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjQiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IlVzZXIgaGFzIG1hZGUgYSBwcmV2aW91cyBwdXJjaGFzZSIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjUiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBSZWNvbW1lbmRlZCBmb3IgeW91IC0gc2l0ZSBhcmVhIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJMSVNUIn0sIjYiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBOZXcgcmVsZWFzZSBkaXNjb3VudCBwcm9kdWN0IiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiNyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiW0NPTlZdIFtVVFldIEJ1ZGdldCBjYXRlZ29yaWVzIHZpc2libGUiLCJmb3JtYXQiOi0yLCJzY29wZSI6IlZJU0lUT1IiLCJ0eXBlIjoiVU5JUVVFIn0sIjgiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBbVVRZXSBGcmVlIGFzc2V0IENUQSBjbGlja2VkIiwiZm9ybWF0IjotMiwic2NvcGUiOiJWSVNJVE9SIiwidHlwZSI6IlVOSVFVRSJ9LCI5Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJbQ09OVl0gW1VUWV0gVW5pdHkgcmVjb21tZW5kIiwiZm9ybWF0IjotMiwic2NvcGUiOiJWSVNJVE9SIiwidHlwZSI6IlVOSVFVRSJ9LCIxMCI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiW0NPTlZdIFF1aWNrbGlua3MgdmlzaWJsZSBbOC4yXSIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjExIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJbQ09OVl0gVXNlciBzYXcgMCBzZWFyY2ggcmVzdWx0cyIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjEyIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJbQ09OVl0gUmV2aWV3IHNlY3Rpb24gb24gUERQIiwiZm9ybWF0IjotMiwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMTMiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBbVVRZXSBFeGl0IGludGVudCIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVRPUiIsInR5cGUiOiJVTklRVUUifSwiMTQiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXVszLjIzXSBVc2VyIHNlZXMgc2VhcmNoIHBhZ2UiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIxNSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiW0NPTlZdIFNwcmluZyBzYWxlIHByb21vIHNlZW4iLCJmb3JtYXQiOi0yLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIxNiI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiW0NPTlZdIFtVVFldIE92ZXJ2aWV3IHNlY3Rpb24gdmlzaWJsZSIsImZvcm1hdCI6LTIsInNjb3BlIjoiVklTSVRPUiIsInR5cGUiOiJVTklRVUUifSwiMTciOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IltDT05WXSBVc2VyIHNlZXMgcHVibGlzaGVyIHBhaWQgYXNzZXQgdXBzZWxsIG1vZGFsIiwiZm9ybWF0IjotMiwic2NvcGUiOiJWSVNJVE9SIiwidHlwZSI6IlVOSVFVRSJ9fX0=","isNewEditorEnabled":false}};
})();if (window.kameleoonLightIframe){if (window.kameleoonExternalIFrameLoadedData) { window.kameleoonQueue = window.kameleoonQueue || [];window.kameleoonQueue.push({level: 'IMMEDIATE',command: function () {Kameleoon.Utils.runProtectedScript(window.kameleoonExternalIFrameLoadedData);}}); Kameleoon.Analyst.load();}}else{Kameleoon.Analyst.load();}}